{"version":3,"sources":["webpack:///$_lazy_route_resource lazy namespace object","webpack:///src/app/app-routing.module.ts","webpack:///src/app/app.component.html","webpack:///src/app/app.component.ts","webpack:///src/app/app.module.ts","webpack:///src/app/auth-module/auth-module.module.ts","webpack:///src/app/auth-module/login/login.component.html","webpack:///src/app/auth-module/login/login.component.ts","webpack:///src/app/auth-module/register/register.component.html","webpack:///src/app/auth-module/register/register.component.ts","webpack:///src/app/auth-module/services/auth.service.ts","webpack:///src/app/auth-module/token.interceptor.ts","webpack:///src/app/components/bike-station-info/bike-station-info.component.html","webpack:///src/app/components/bike-station-info/bike-station-info.component.ts","webpack:///src/app/components/dialog/dialog.component.html","webpack:///src/app/components/dialog/dialog.component.ts","webpack:///src/app/components/errordialog/errordialog.component.html","webpack:///src/app/components/errordialog/errordialog.component.ts","webpack:///src/app/components/info-popup/info-popup.component.html","webpack:///src/app/components/info-popup/info-popup.component.ts","webpack:///src/app/components/loaading-near-stations/loaading-near-stations.component.html","webpack:///src/app/components/loaading-near-stations/loaading-near-stations.component.ts","webpack:///src/app/components/map/map.component.html","webpack:///src/app/components/map/map.component.ts","webpack:///src/app/components/nomadriddialog/nomadriddialog.component.html","webpack:///src/app/components/nomadriddialog/nomadriddialog.component.ts","webpack:///src/app/components/tabledetail/services/tabledetail.service.ts","webpack:///src/app/components/tabledetail/tabledetail.component.html","webpack:///src/app/components/tabledetail/tabledetail.component.ts","webpack:///src/app/components/welcome-dialog/welcome-dialog.component.html","webpack:///src/app/components/welcome-dialog/welcome-dialog.component.ts","webpack:///src/app/components/welcome/welcome.component.html","webpack:///src/app/components/welcome/welcome.component.ts","webpack:///src/app/info-card/adress-finder/adress-finder.component.html","webpack:///src/app/info-card/adress-finder/adress-finder.component.ts","webpack:///src/app/info-card/closestations/closestations.component.html","webpack:///src/app/info-card/closestations/closestations.component.ts","webpack:///src/app/info-card/info-card.module.ts","webpack:///src/app/info-card/info-card/info-card.component.html","webpack:///src/app/info-card/info-card/info-card.component.ts","webpack:///src/app/info-card/services/info-card.service.ts","webpack:///src/app/legend/bikes-legend/bikes-legend.component.html","webpack:///src/app/legend/bikes-legend/bikes-legend.component.ts","webpack:///src/app/legend/buses-legend/buses-legend.component.html","webpack:///src/app/legend/buses-legend/buses-legend.component.ts","webpack:///src/app/legend/legend.module.ts","webpack:///src/app/legend/legend/legend.component.html","webpack:///src/app/legend/legend/legend.component.ts","webpack:///src/app/legend/services/legend.service.ts","webpack:///src/app/material-module.ts","webpack:///src/app/services/bike-accident.service.ts","webpack:///src/app/services/bikes-layer.service.ts","webpack:///src/app/services/buses.service.ts","webpack:///src/app/services/districts.service.ts","webpack:///src/app/services/map.service.ts","webpack:///src/app/services/parking.service.ts","webpack:///src/app/services/routes.service.ts","webpack:///src/app/services/streets-style.service.ts","webpack:///src/app/services/streets.service.ts","webpack:///src/app/services/style-line-features.service.ts","webpack:///src/app/services/style-points-features.service.ts","webpack:///src/app/services/style-polygon-features.service.ts","webpack:///src/app/services/style.service.ts","webpack:///src/app/services/user.service.ts","webpack:///src/app/upper-bar/services/upper-bar.service.ts","webpack:///src/app/upper-bar/upper-bar.module.ts","webpack:///src/app/upper-bar/upper-bar/upper-bar.component.html","webpack:///src/app/upper-bar/upper-bar/upper-bar.component.ts","webpack:///src/environments/environment.ts","webpack:///src/main.ts"],"names":["webpackEmptyAsyncContext","req","Promise","resolve","then","e","Error","code","keys","module","exports","id","routes","path","component","redirectTo","pathMatch","AppRoutingModule","AppComponent","authService","title","doLogin","AppModule","AuthModuleModule","LoginComponent","upperBarService","loginOrRegister","createForm","loginForm","loginParams","get","value","doLoginUser","notifyUserToken","RegisterComponent","registerForm","passwordMatch","registerParams","registerUser","AuthService","httpClient","REST_API_SERVER","emtTokenOut","emtToken$","asObservable","userTokenOut","userToken$","subscribe","res","token","undefined","notifyToken","err","console","log","post","localStorage","setItem","params","getItem","statusText","next","TokenInterceptor","isRefreshing","refreshTokenSubject","request","addToken","handle","pipe","error","status","clone","setHeaders","BikeStationInfoComponent","DialogComponent","dialogRef","bikesService","disableClose","bikes$","bikes","closeDialog","close","ErrordialogComponent","data","bikesLayerService","setError","mapquesturlSplitted","url","split","notifyBikes","InfoPopupComponent","LoaadingNearStationsComponent","MapComponent","mapService","userService","districtsService","busesService","bikeAccidents","dialog","legendService","selectIndex","renderMap","openLoading","selectOnMap","open","width","afterClosed","result","NomadriddialogComponent","stylePointsFeaturesService","format","apiError","fakeAddress","sendUserPositionToInfoCard","fakeAddressSplt","lng","lat","sessionStorage","String","userCoords","removeItem","JSON","stringify","fakeAddressCoords","userPositionCoords","readFeature","dataProjection","featureProjection","getGeometry","getCoordinates","userPositionFeature","geometry","applyStyleToUser","userPositionCollection","push","userPositionLayer","name","source","features","map$","addLayer","updateMapViewCenter","TabledetailService","selectedStationIdOut","selectedStationId$","selectedStationId","TabledetailComponent","infoCardService","routeService","tabledetailService","displayedColumns","notifyClosestsStations$","closetsStations","closetsStation","dataSource","updatedAt","select","latBikeStation","pointsList","coordinates","substring","indexOf","lngBikeStation","length","bikeStationCoords","parse","setViewPoint","notifySelectedStationId","stationId","getRoute","createRouteLayer","WelcomeDialogComponent","WelcomeComponent","router","navigate","AdressFinderComponent","streetsService","iconRegistry","sanitizer","addressFinderControl","streetsList","Array","foundAddressCollection","filteredStreets","valueChanges","_filterAdress","addSvgIcon","bypassSecurityTrustResourceUrl","createAddressFinderForm","streetsList$","addressFinderForm","addressToFind","filterValue","resultF","filter","street","wholeAddress","toLowerCase","includes","event","address","option","matches","match","streetWithOutNumber","index","trim","addressSplitted","cleanStreet","getAdressCoordinates","foundAddressCoords","results","locations","latLng","formatCoords","formatCoordsSplitted","foundAddressCoordsFormatted","replace","foundAddressFeature","applyStyleToFoundAdressMarker","foundAddressLayer","ClosestationsComponent","errorNumberResults","nearestBikeStations","userPosition","routeShowed","route$","route","sendUserPositionToInfoCard$","positionCompositionForm","re","RegExp","test","parseFloat","getClosestsStations","openTableDetail","reset","notifyClosestStations","clearRoute","InfoCardModule","InfoCardComponent","streets","zoomButtontext","createAddressForm","sendDevice$","mobile","myForm","firstName","zoomTo","globalPosition","myIcon","L","icon","iconSize","iconAnchor","popupAnchor","shadowSize","shadowAnchor","options","iconUrl","sendFoundAdressIconToMap","marker","clickable","draggable","InfoCardService","closetsStationsListOut","iconOut","zoomToOut","sendFoundAdressIconToMap$","zoomTo$","errorMessage","ErrorEvent","message","window","alert","handleError","BikesLegendComponent","styleService","bikesOrSlots","checked","disabled","bikeOrDot","createBikeStationsFeatures","toggleChange","BusesLegendComponent","notifyBuses$","busStops","LegendModule","LegendComponent","parkingService","showInLegend","uopenLogin$","userToken","userLocation","getFreeParkingPlaces","LegendService","toggleChangeOut","toggleChange$","notifyToggleChange","zero","MaterialModule","BikeAccidentService","bikeAccidentsCollection","getBikeAccidents","createHeatMap","BikesLayerService","bikesOut","bikeStationsCollection","selectedBikeStationCollection","bikeStations","getBikeStations","addSelected","response","bikeOrSlot","forEach","bikeStation","splitCoords","bikeStationFeature","setId","setProperties","availableBikes","freeDocks","applyStyleToMarker","bikeStationsLayer","i","getLayers","getArray","getProperties","removeLayer","bikesLoaded","removeSelectedBikeStation","selectedFeature","getSource","getFeatureById","selectedFeatureCoords","applyStyleToSelectedFeature","selectedbikeStationLayer","BusesService","busesListOut","getBusStopsAroundUser","notifyBuses","DistrictsService","stylePolygonFeaturesService","districtsFeaturesCollection","alreadyDistricts","getDistricts","createDistrictsFeatures","totalBikes","districtsArrayCoords","districtsArrayInfo","pair","geom","coordsDistrictArray","districtObj","j","coordsPair","districtName","coorsTranform","map","coordinate","feature","applyStyleToDistricts","districtsLayer","plots_styles","fill","color","text","textAlign","font","textBaseline","scale","offsetX","offsetY","stroke","setStyle","MapService","layers","viewCoordinates","userPositionOut","deviceOut","device","key","imagerySet","view","center","zoom","maxZoom","interactions","altShiftDragRotate","pinchRotate","target","document","getElementById","controls","setView","bikeStationsLayerIndex","values_","targetLayer","getFeatures","on","feature_buff","getLength","componentInstance","item","availableSlots","addInteraction","ParkingService","RoutesService","styleLineFeaturesService","lineCollection","routeOut","userCoordsStr","bikeStationCoordsStr","lineCoords","lineFeature","routeLayer","notifyRoute","StreetsStyleService","lineStyle","streetsStyle","StreetsService","streetsStyleService","streetsCollection","streetsListOut","getStreets","notifyStreets","getStreetsTopo","createStreetsFeatures","streetFeature","styleStreets","streetsLayer","StyleLineFeaturesService","StylePointsFeaturesService","assets_base","markerStyle","less2Slots","image","anchor","anchorXUnits","anchorYUnits","opacity","src","snapToPixel","slotSymbol","more2Slots","less2Bikes","more2Bikes","markerStyleSelectedFeature","StylePolygonFeaturesService","noBikes","zIndex","lessThan50Bikes","moreThan50Bikes","StyleService","UserService","userPosition$","REST_API_SERVER_URBAN","getUserPosition","fetchCoordinates","coords","getGeoCoding","latitude","longitude","reject","navigator","geolocation","getCurrentPosition","position","userCity","getGeoCodingAPI","adminArea5","registerVisit","checkIfUserInMadrid","providedLocation","formatCoords2","UpperBarService","openLoginOut","openLogin","UpperBarModule","UpperBarComponent","payload","atob","userName","logOut","environment","production"],"mappings":"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","file":"main-es5.js","sourcesContent":["function webpackEmptyAsyncContext(req) {\n\t// Here Promise.resolve().then() is used instead of new Promise() to prevent\n\t// uncaught exception popping up in devtools\n\treturn Promise.resolve().then(function() {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t});\n}\nwebpackEmptyAsyncContext.keys = function() { return []; };\nwebpackEmptyAsyncContext.resolve = webpackEmptyAsyncContext;\nmodule.exports = webpackEmptyAsyncContext;\nwebpackEmptyAsyncContext.id = \"./$$_lazy_route_resource lazy recursive\";","import { NgModule } from '@angular/core';\r\nimport { Routes, RouterModule } from '@angular/router';\r\nimport {MapComponent} from './components/map/map.component'\r\nimport {WelcomeComponent} from './components/welcome/welcome.component'\r\nconst routes: Routes = [\r\n  {path:'map', component:MapComponent},{path:'welcome', component:WelcomeComponent},\r\n{ path: '',\r\n    redirectTo: '/welcome',\r\n    pathMatch: 'full'\r\n    } ];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forRoot(routes)],\r\n  exports: [RouterModule]\r\n})\r\nexport class AppRoutingModule { }\r\n","<router-outlet></router-outlet>","import { HttpClient } from '@angular/common/http';\r\nimport { Component } from '@angular/core';\r\nimport { AuthService } from './auth-module/services/auth.service';\r\n\r\n@Component({\r\n  selector: 'app-root',\r\n  templateUrl: './app.component.html',\r\n  styleUrls: ['./app.component.css']\r\n})\r\nexport class AppComponent {\r\n  title = 'madrid-mobility-front';\r\n\r\n  constructor(private authService: AuthService){\r\n\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    this.authService.doLogin();\r\n  }\r\n}\r\n","import { BrowserModule } from '@angular/platform-browser';\r\nimport { NgModule } from '@angular/core';\r\n\r\nimport { AppRoutingModule } from './app-routing.module';\r\nimport { AppComponent } from './app.component';\r\nimport { MapComponent } from './components/map/map.component';\r\nimport { ReactiveFormsModule } from '@angular/forms';\r\nimport {HttpClientModule,HTTP_INTERCEPTORS } from '@angular/common/http';\r\nimport { MaterialModule } from './material-module';\r\nimport{BrowserAnimationsModule} from '@angular/platform-browser/animations';\r\nimport {TableModule} from 'primeng/table';\r\n//import {MatProgressSpinnerModule} from '@angular/material/progress-spinner';\r\nimport { DialogComponent } from './components/dialog/dialog.component';\r\nimport { LoaadingNearStationsComponent } from './components/loaading-near-stations/loaading-near-stations.component';\r\nimport { WelcomeDialogComponent } from './components/welcome-dialog/welcome-dialog.component';\r\nimport { NomadriddialogComponent } from './components/nomadriddialog/nomadriddialog.component';\r\nimport { ErrordialogComponent } from './components/errordialog/errordialog.component';\r\nimport { BikeStationInfoComponent } from './components/bike-station-info/bike-station-info.component';\r\nimport { WelcomeComponent } from './components/welcome/welcome.component';\r\nimport { TabledetailComponent  } from './components/tabledetail/tabledetail.component';\r\nimport { InfoCardModule } from './info-card/info-card.module';\r\nimport { LegendModule } from './legend/legend.module';\r\nimport { UpperBarModule } from './upper-bar/upper-bar.module';\r\n\r\nimport { TokenInterceptor } from './auth-module/token.interceptor';\r\nimport { InfoPopupComponent } from './components/info-popup/info-popup.component';\r\n@NgModule({\r\n  declarations: [\r\n    AppComponent,\r\n    MapComponent,\r\n    DialogComponent,\r\n    LoaadingNearStationsComponent,\r\n    WelcomeDialogComponent,\r\n    NomadriddialogComponent,\r\n    ErrordialogComponent,\r\n    BikeStationInfoComponent,\r\n    WelcomeComponent,\r\n    TabledetailComponent,\r\n    InfoPopupComponent\r\n  ],\r\n  imports: [\r\n    BrowserModule,\r\n    AppRoutingModule,\r\n    ReactiveFormsModule,\r\n    HttpClientModule,\r\n    BrowserAnimationsModule,\r\n    MaterialModule,\r\n    TableModule,\r\n    //MatProgressSpinnerModule,\r\n    InfoCardModule,\r\n    LegendModule,\r\n    UpperBarModule\r\n  ],\r\n  entryComponents: [\r\n    DialogComponent,LoaadingNearStationsComponent,WelcomeDialogComponent,\r\n    NomadriddialogComponent,ErrordialogComponent,BikeStationInfoComponent,\r\n    TabledetailComponent, InfoPopupComponent\r\n  ],\r\n  providers: [\r\n     MapComponent,\r\n     {\r\n      provide: HTTP_INTERCEPTORS,\r\n      useClass: TokenInterceptor,\r\n      multi: true\r\n    },],\r\n  bootstrap: [AppComponent],\r\n  \r\n})\r\nexport class AppModule { }\r\n\r\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { RegisterComponent } from './register/register.component';\nimport { LoginComponent } from './login/login.component';\nimport { MaterialModule } from '../material-module';\nimport { ReactiveFormsModule } from '@angular/forms';\n\n\n@NgModule({\n  declarations: [RegisterComponent, LoginComponent],\n  imports: [\n    CommonModule, MaterialModule,ReactiveFormsModule\n  ],\n  exports:[\n    LoginComponent,RegisterComponent\n  ]\n})\nexport class AuthModuleModule { }\n","<div *ngIf=\"loginOrRegister\">\n  <div>\n    <div [formGroup]=\"loginForm\">\n      <mat-form-field appearance=\"outline\">\n        <mat-label>Login</mat-label>\n        <input matInput formControlName=\"email\">\n      </mat-form-field>\n      <mat-form-field appearance=\"outline\">\n        <mat-label>Password</mat-label>\n        <input matInput formControlName=\"password\" type=\"password\">\n      </mat-form-field>\n    </div>\n  </div>\n  <a role=\"button\" (click)=\"showRegister()\">Haven´t an account yet?</a>\n  <div style=\"width: 25%;\">\n    <button mat-raised-button color=\"primary\" (click)=\"login()\">Login </button><br>\n    <button mat-raised-button color=\"primary\" (click)=\"getBack()\">Get back to legend </button><br>\n  </div>\n</div>\n<div *ngIf=\"!loginOrRegister\">\n  <app-register></app-register>\n</div>","import { Component, OnInit } from '@angular/core';\nimport { FormControl, FormGroup } from '@angular/forms';\nimport { UpperBarService } from 'src/app/upper-bar/services/upper-bar.service';\nimport { AuthService } from '../services/auth.service';\n\n@Component({\n  selector: 'app-login',\n  templateUrl: './login.component.html',\n  styleUrls: ['./login.component.css']\n})\nexport class LoginComponent implements OnInit {\n\n  loginForm: FormGroup;\n  loginOrRegister: boolean = true;\n\n  constructor(private authService: AuthService, private upperBarService: UpperBarService) { }\n\n  ngOnInit(): void {\n    this.createForm();\n  }\n\n  createForm() {\n    this.loginForm = new FormGroup({\n      'email': new FormControl(),\n      'password': new FormControl(),\n    });\n  }\n\n  login(){\n    let loginParams = {\n      'email':this.loginForm.get('email').value,\n      'password':this.loginForm.get('password').value,\n      'getHash':true\n    }\n\n    \n    this.authService.doLoginUser(loginParams)\n  }\n\n  getBack(){\n    this.authService.notifyUserToken('back');\n  }\n\n  showRegister(){\n    this.loginOrRegister = false;\n  }\n}\n","<div>\n    <div [formGroup]=\"registerForm\">\n      <mat-form-field appearance=\"outline\">\n        <mat-label>Name</mat-label>\n        <input matInput formControlName=\"name\">\n      </mat-form-field>\n      <mat-form-field appearance=\"outline\">\n        <mat-label>Surname</mat-label>\n        <input matInput formControlName=\"surname\" type=\"text\">\n      </mat-form-field>\n      <mat-form-field appearance=\"outline\">\n        <mat-label>Email</mat-label>\n        <input matInput formControlName=\"email\" type=\"text\">\n      </mat-form-field>\n      <mat-form-field appearance=\"outline\">\n        <mat-label>Password</mat-label>\n        <input matInput formControlName=\"password\" type=\"password\">\n      </mat-form-field>\n      <mat-form-field appearance=\"outline\">\n        <mat-label>Confirm Password</mat-label>\n        <input matInput formControlName=\"password2\" type=\"password\">\n      </mat-form-field>\n    </div>\n  </div>\n  <div style=\"width: 25%;\">\n    <button mat-raised-button color=\"primary\" (click)=\"register()\">Create account </button><br>\n  </div>\n","import { Component, OnInit } from '@angular/core';\nimport { FormControl, FormGroup } from '@angular/forms';\nimport { AuthService } from '../services/auth.service';\n\n@Component({\n  selector: 'app-register',\n  templateUrl: './register.component.html',\n  styleUrls: ['./register.component.css']\n})\nexport class RegisterComponent implements OnInit {\n\n  registerForm: FormGroup;\n\n  constructor(private authService: AuthService) { }\n\n  ngOnInit(): void {\n    this.createForm();\n  }\n\n  createForm() {\n    this.registerForm = new FormGroup({\n      'name': new FormControl(),\n      'surname': new FormControl(),\n      'email': new FormControl(),\n      'password': new FormControl(),\n      'password2': new FormControl(),\n    });\n  }\n\n  register(){\n    if(this.passwordMatch()){\n\n      let registerParams = {\n        'name': this.registerForm.get('name').value,\n        'surname': this.registerForm.get('surname').value,\n        'email': this.registerForm.get('email').value,\n        'password': this.registerForm.get('password').value,\n        'app': 'madrid-mobility'\n      }\n      this.authService.registerUser(registerParams);\n    }else{\n\n    }\n  }\n\n  passwordMatch(){\n    if(this.registerForm.get('password').value === this.registerForm.get('password2').value){\n      return true;\n    }else{\n      return false;\n    }\n  }\n}\n","import { HttpClient } from '@angular/common/http';\nimport { Injectable } from '@angular/core';\nimport { BehaviorSubject } from 'rxjs';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class AuthService {\n\n  //private REST_API_SERVER = \"http://localhost:8081/api/auth/EMTServices/\";\n  private REST_API_SERVER = \"https://floating-reef-24535.herokuapp.com/api/auth/EMTServices/\";\n\n  constructor(private httpClient: HttpClient) { }\n\n  private emtTokenOut = new BehaviorSubject<string>(null);\n\n  emtToken$ = this.emtTokenOut.asObservable();\n\n  private userTokenOut = new BehaviorSubject<string>(null);\n\n  userToken$ = this.userTokenOut.asObservable();\n\n  doLogin(){\n    this.httpClient.get(this.REST_API_SERVER+'login').subscribe(\n      res=>{\n      //@ts-ignore\n      if(res.token != null && res.token != undefined){\n        //@ts-ignore\n        this.notifyToken(res.token)\n      }\n    },\n    err =>{\n      console.log(err)\n    });\n  }\n\n  //calling to indentity service in node\n  doLoginUser(loginParams){\n    this.httpClient.post('http://localhost:8082/api/login',loginParams).subscribe(\n      res=>{    \n        //@ts-ignore      \n          localStorage.setItem('JWT_TOKEN',res.token );\n          let params = {\n            //@ts-ignore\n            token :res.token\n          }\n        this.httpClient.post('http://localhost:8081/api/auth/EMTServices/setUserToken',params).subscribe(\n          res=>{\n            this.notifyUserToken(localStorage.getItem('JWT_TOKEN'));\n          }, err=>{\n            if(err.statusText === 'OK'){\n              this.notifyUserToken(localStorage.getItem('JWT_TOKEN'));\n            }\n          }\n        )\n    },\n    err =>{\n      console.log(err)\n    });\n  }\n\n  registerUser(registerParams){\n    this.httpClient.post('http://localhost:8082/api/register', registerParams).subscribe(\n      res=>{\n      console.log(res)\n    },\n    err =>{\n      console.log(err)\n    });\n  }\n\n  notifyUserToken(token: string){\n    this.userTokenOut.next(token);\n  }\n\n  notifyToken(token: string){\n    this.emtTokenOut.next(token);\n  }\n\n  logOut(){\n    this.httpClient.post(this.REST_API_SERVER+'logOut', null).subscribe();\n  }\n}\n","import { Injectable } from '@angular/core';\r\nimport { HttpRequest, HttpHandler, HttpEvent, HttpInterceptor, HttpErrorResponse } from '@angular/common/http';\r\n//import { AuthService } from './services/auth.service';\r\nimport { Observable, throwError, BehaviorSubject } from 'rxjs';\r\nimport { catchError, filter, take, switchMap } from 'rxjs/operators';\r\n\r\n@Injectable()\r\nexport class TokenInterceptor implements HttpInterceptor {\r\n\r\n  private isRefreshing = false;\r\n  private refreshTokenSubject: BehaviorSubject<any> = new BehaviorSubject<any>(null);\r\n\r\n  \r\n\r\n  //constructor(public authService: AuthService) { }\r\n  constructor() { }\r\n\r\n  intercept(request: HttpRequest<any>, next: HttpHandler): Observable<HttpEvent<any>> {\r\n    let token=localStorage.getItem('JWT_TOKEN');\r\n    // if (this.authService.getJwtToken()) {\r\n       request = this.addToken(request, token);\r\n    // }\r\n\r\n    return next.handle(request).pipe(catchError(error => {\r\n      if (error instanceof HttpErrorResponse && error.status === 401) {\r\n        //return this.handle401Error(request, next);\r\n      } else {\r\n        console.log(error)\r\n        return throwError(error);\r\n      }\r\n    }));\r\n  }\r\n\r\n   private addToken(request: HttpRequest<any>, token: string) {\r\n     return request.clone({\r\n       setHeaders: {\r\n         'Authorization': `Bearer ${token}`\r\n       }\r\n     });\r\n   }\r\n}","<p>bike-station-info works!</p>\n","import { Component, OnInit } from '@angular/core';\n\n@Component({\n  selector: 'app-bike-station-info',\n  templateUrl: './bike-station-info.component.html',\n  styleUrls: ['./bike-station-info.component.css']\n})\nexport class BikeStationInfoComponent implements OnInit {\n\n  constructor() { }\n\n  ngOnInit(): void {\n  }\n\n}\n","<div style=\"text-align: center;\">\r\n    <mat-spinner style=\"margin: 0 auto;\"></mat-spinner>\r\n    <span style=\"display: inline-block;\">Loading bike stations</span>\r\n</div>","import { Component, OnInit } from '@angular/core';\r\nimport {MatDialog, MatDialogRef, MAT_DIALOG_DATA} from '@angular/material/dialog';\r\nimport { BikesLayerService } from 'src/app/services/bikes-layer.service';\r\n@Component({\r\n  selector: 'app-dialog',\r\n  templateUrl: './dialog.component.html',\r\n  styleUrls: ['./dialog.component.css']\r\n})\r\nexport class DialogComponent implements OnInit {\r\n\r\n  constructor(public dialogRef: MatDialogRef<DialogComponent>,\r\n     private bikesService: BikesLayerService\r\n    ) {\r\n      dialogRef.disableClose = true;\r\n      this.bikesService.bikes$.subscribe(bikes=>{\r\n        if(bikes != null){\r\n          this.closeDialog();\r\n        }\r\n      })\r\n     }\r\n\r\n  ngOnInit(): void {\r\n  }\r\n\r\n  closeDialog() {\r\n    this.dialogRef.close();\r\n  }\r\n\r\n}\r\n","<h3>{{error}}</h3>\n<button mat-raised-button color=\"primary\"  [mat-dialog-close] (click)=\"notify()\">Close</button>","import { Component, Inject, OnInit } from '@angular/core';\nimport { MatDialogRef, MAT_DIALOG_DATA } from '@angular/material/dialog';\nimport { BikesLayerService } from 'src/app/services/bikes-layer.service';\nimport { DialogData } from '../nomadriddialog/nomadriddialog.component';\n\n@Component({\n  selector: 'app-errordialog',\n  templateUrl: './errordialog.component.html',\n  styleUrls: ['./errordialog.component.css']\n})\nexport class ErrordialogComponent implements OnInit {\n\n  error: string\n\n  constructor(public dialogRef: MatDialogRef<ErrordialogComponent>,\n    @Inject(MAT_DIALOG_DATA) public data: DialogData, private bikesLayerService:BikesLayerService) { }\n\n  ngOnInit(): void {\n    this.setError();\n  }\n\n  setError(){\n    console.log(this.data)\n    //@ts-ignore\n    let mapquesturlSplitted = this.data.err.url.split('/')[2];\n    console.log(mapquesturlSplitted)\n    \n    //@ts-ignore\n    if(mapquesturlSplitted === 'www.mapquestapi.com'){\n      this.error = 'An error has occurred retrieving your location, please, try again in a few seconds'\n    }\n    \n  }\n\n  notify(){\n    this.bikesLayerService.notifyBikes(true);\n  }\n\n}\n","<h3 class=\"bold\">Bike station name:</h3><h4>{{name}}</h4>\n<p>Address:</p>{{address}}\n<p>Available bikes:</p>{{totalBikes}}\n<p>Available slots:</p>{{availableSlots}}\n<p>Last update:</p> {{updatedAt | date: 'medium'}}","import { Component, OnInit } from '@angular/core';\n\nexport interface PeriodicElement {\n  name: string;\n  availableBikes: number;\n  freeDocks: number;\n}\n\n@Component({\n  selector: 'app-info-popup',\n  templateUrl: './info-popup.component.html',\n  styleUrls: ['./info-popup.component.css']\n})\nexport class InfoPopupComponent implements OnInit {\n  totalBikes:string;\n  availableSlots:string;\n  name:string;\n  address:string;\n  updatedAt: string;\n  constructor() { }\n\n  ngOnInit(): void {\n  }\n\n}\n","<!-- <mat-spinner></mat-spinner>  -->\r\n<span>Calculating near stations</span>","import { Component, OnInit } from '@angular/core';\r\nimport {MatDialog, MatDialogRef, MAT_DIALOG_DATA} from '@angular/material/dialog';\r\n@Component({\r\n  selector: 'app-loaading-near-stations',\r\n  templateUrl: './loaading-near-stations.component.html',\r\n  styleUrls: ['./loaading-near-stations.component.css']\r\n})\r\nexport class LoaadingNearStationsComponent implements OnInit {\r\n\r\n  constructor(public dialogRef: MatDialogRef<LoaadingNearStationsComponent>,\r\n    ) { }\r\n\r\n  ngOnInit(): void {\r\n  }\r\n\r\n}\r\n","<div>\r\n  \r\n  <div #mapElement id=\"map\" class=\"map\"\r\n  style=\"border: none; position: absolute; top: 0; left: 0; right: 0; bottom: 0; height: 100%; width: 100%;\"\r\n  (click)=\"selectOnMap()\" (mousewheel)=\"detectZoomChange()\">\r\n  <app-upper-bar></app-upper-bar>\r\n  <app-legend></app-legend>\r\n    <app-info-card></app-info-card>\r\n</div>\r\n</div>\r\n","import { Component, OnInit} from '@angular/core';\r\n//import { MatExpansionPanel } from '@angular/material/expansion'\r\n//import { MatDialog, MatDialogRef, MAT_DIALOG_DATA } from '@angular/material/dialog';\r\nimport { DialogComponent } from '../dialog/dialog.component';\r\n\r\nimport { BikeAccidentService } from '../../services/bike-accident.service'\r\nimport { MapService } from '../../services/map.service';\r\nimport { BikesLayerService } from 'src/app/services/bikes-layer.service';\r\nimport { UserService } from 'src/app/services/user.service';\r\nimport { DistrictsService } from 'src/app/services/districts.service';\r\nimport { BusesService } from 'src/app/services/buses.service';\r\nimport { MatDialog } from '@angular/material/dialog';\r\n\r\nimport Select from 'ol/interaction/Select';\r\nimport { InfoPopupComponent } from '../info-popup/info-popup.component';\r\nimport { LegendService } from 'src/app/legend/services/legend.service';\r\n\r\n\r\n@Component({\r\n  selector: 'app-map',\r\n  templateUrl: './map.component.html',\r\n  styleUrls: ['./map.component.css']\r\n})\r\nexport class MapComponent implements OnInit {\r\n\r\n  selectIndex: number=0;\r\n\r\n  constructor(private mapService: MapService, \r\n    private bikesLayerService: BikesLayerService, \r\n    private userService:UserService, \r\n    private districtsService: DistrictsService, \r\n    private busesService: BusesService,\r\n    private bikeAccidents: BikeAccidentService,\r\n    public dialog: MatDialog,\r\n    private legendService: LegendService){\r\n\r\n  }\r\n\r\n  ngOnInit() {\r\n    this.mapService.renderMap();\r\n    this.openLoading();\r\n  }\r\n\r\n  detectZoomChange(){\r\n\r\n  }\r\n\r\n  selectOnMap(){\r\n    this.mapService.selectOnMap();\r\n  }\r\n\r\n  openLoading() {\r\n    const dialogRef = this.dialog.open(DialogComponent, {\r\n      width: '600px',\r\n    });\r\n    dialogRef.afterClosed().subscribe(result => {\r\n      console.log(result)\r\n       });\r\n  }\r\n}\r\n","<h2 *ngIf='!apiError'>It seems that you are not located in Madrid</h2>\n<h2 *ngIf='apiError'>Mapquest api geolocation service has failed,</h2>\n<h3>To have a try to this app, choose any address to be used as your current position</h3>\n<mat-form-field>\n    <mat-label>Addresses</mat-label>\n    <mat-select>\n      <mat-option value=\"Calle Lope de Vega 8\" (click)=\"setFakeUserPosition('-3.69837 40.41379')\">\n        Calle Lope de Vega 9\n      </mat-option>\n      <mat-option value=\"Calle Palma 40\"(click)=\"setFakeUserPosition('-3.70524 40.42652')\" [mat-dialog-close]>\n        Calle Palma 40\n      </mat-option>\n    </mat-select>\n  </mat-form-field>","import { Component, OnInit, Inject } from '@angular/core';\nimport { MatDialog, MatDialogRef, MAT_DIALOG_DATA } from '@angular/material/dialog';\nimport { MapService } from 'src/app/services/map.service';\n\nimport WKT from 'ol/format/WKT';\nimport Feature from 'ol/Feature';\nimport Point from 'ol/geom/Point';\nimport { Vector as VectorSource } from 'ol/source';\nimport VectorLayer from 'ol/layer/Vector';\nimport { StyleService } from 'src/app/services/style.service';\nimport Collection from 'ol/Collection';\nimport { StylePointsFeaturesService } from 'src/app/services/style-points-features.service';\n\nexport interface DialogData {\n  fakeAddress: string;\n}\n\n@Component({\n  selector: 'app-nomadriddialog',\n  templateUrl: './nomadriddialog.component.html',\n  styleUrls: ['./nomadriddialog.component.css']\n})\nexport class NomadriddialogComponent implements OnInit {\n  value: any;\n  format = new WKT();\n  apiError:boolean=false;\n  constructor(\n    public dialogRef: MatDialogRef<NomadriddialogComponent>,\n    @Inject(MAT_DIALOG_DATA) public data: DialogData, private mapService: MapService, private stylePointsFeaturesService: StylePointsFeaturesService) { }\n\n  ngOnInit(): void {\n  }\n\n  setFakeUserPosition(fakeAddress) {\n\n    this.mapService.sendUserPositionToInfoCard(fakeAddress);\n\n    let fakeAddressSplt =fakeAddress.split(' ');\n    let lng =fakeAddressSplt[0];\n    let lat =fakeAddressSplt[1];\n\n    sessionStorage.setItem('userLat', String(lat));\n    sessionStorage.setItem('userLng', String(lng));\n\n    let userCoords = {\n      //@ts-ignore\n      lat:lat,\n      //@ts-ignore\n      lng:lng\n    }\n\n    localStorage.removeItem('userCoords')\n    localStorage.setItem('userCoords',JSON.stringify(userCoords));\n\n    let fakeAddressCoords = 'POINT(' + fakeAddress + ')';\n\n    let userPositionCoords = this.format.readFeature(fakeAddressCoords, { dataProjection: 'EPSG:4326', featureProjection: 'EPSG:3857' }).getGeometry().getCoordinates()\n\n    let userPositionFeature = new Feature({\n      geometry: new Point(userPositionCoords)\n    });\n\n    this.stylePointsFeaturesService.applyStyleToUser(userPositionFeature);\n\n    let userPositionCollection = new Collection;\n\n    userPositionCollection.push(userPositionFeature);\n\n    let userPositionLayer = new VectorLayer({\n      name: 'userPosition',\n      source: new VectorSource({\n        features: userPositionCollection\n      })\n    });\n\n    this.mapService.map$.addLayer(userPositionLayer);\n    this.mapService.updateMapViewCenter(fakeAddressCoords);\n    this.dialogRef.close(fakeAddress);\n  }\n\n}\n","import { Injectable } from '@angular/core';\nimport { BehaviorSubject } from 'rxjs';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class TabledetailService {\n\n  private selectedStationIdOut = new BehaviorSubject<any>(null);\n  selectedStationId$ = this.selectedStationIdOut.asObservable();\n\n  notifySelectedStationId(selectedStationId){\n    this.selectedStationIdOut.next(selectedStationId);\n  }\n\n  constructor() { }\n}\n","<div><p>Last update: {{updatedAt | date: 'medium'}} </p></div>\n<table mat-table [dataSource]=\"dataSource\" class=\"mat-elevation-z8\" >\n  <!-- Position Column -->\n  <ng-container matColumnDef=\"address\">\n    <th mat-header-cell *matHeaderCellDef> Address </th>\n    <td mat-cell *matCellDef=\"let element\" role=\"button\" (click)=\"findNearStations(element)\"> {{element.address}} </td>\n  </ng-container>\n\n  <!-- Name Column -->\n  <ng-container matColumnDef=\"name\">\n    <th mat-header-cell *matHeaderCellDef> Name </th>\n    <td mat-cell *matCellDef=\"let element\" role=\"button\" (click)=\"findNearStations(element)\"> {{element.name}} </td>\n  </ng-container>\n\n  <!-- Weight Column -->\n  <ng-container matColumnDef=\"availableBikes\">\n    <th mat-header-cell *matHeaderCellDef> Available bikes </th>\n    <td mat-cell *matCellDef=\"let element\" role=\"button\" (click)=\"findNearStations(element)\"> {{element.availableBikes}} </td>\n  </ng-container>\n\n  <!-- Symbol Column -->\n  <ng-container matColumnDef=\"freeDocks\">\n    <th mat-header-cell *matHeaderCellDef> Free docks </th>\n    <td mat-cell *matCellDef=\"let element\" role=\"button\" (click)=\"findNearStations(element)\"> {{element.freeDocks}} </td>\n  </ng-container>\n\n  <!-- Symbol Column -->\n  <ng-container matColumnDef=\"distance\">\n    <th mat-header-cell *matHeaderCellDef> Distance (mts) </th>\n    <td mat-cell *matCellDef=\"let element\" role=\"button\" (click)=\"findNearStations(element)\"> {{element.distance}} </td>\n  </ng-container>\n\n  <tr mat-header-row *matHeaderRowDef=\"displayedColumns\"></tr>\n  <tr mat-row *matRowDef=\"let row; columns: displayedColumns;\"></tr>\n</table>","import { Component, OnInit } from '@angular/core';\nimport { MatDialogRef } from '@angular/material/dialog';\nimport { MapService } from 'src/app/services/map.service';\nimport { RoutesService } from 'src/app/services/routes.service';\nimport { InfoCardService } from '../../info-card/services/info-card.service';\nimport { TabledetailService } from './services/tabledetail.service';\n\n@Component({\n  selector: 'app-tabledetail',\n  templateUrl: './tabledetail.component.html',\n  styleUrls: ['./tabledetail.component.css']\n})\nexport class TabledetailComponent implements OnInit {\n  displayedColumns: string[] = ['address', 'name', 'availableBikes', 'freeDocks','distance'];\n  selectedStation: any;\n  closetsStation: any;\n  dataSource;\n  updatedAt: Date;\n  constructor(private infoCardService: InfoCardService,\n     private mapService : MapService, \n    private routeService: RoutesService,\n    public dialogRef: MatDialogRef<TabledetailComponent>,\n    private tabledetailService:TabledetailService) { }\n\n  ngOnInit(): void {\n    this.infoCardService.notifyClosestsStations$.subscribe(closetsStations => {\n      if (closetsStations != null) {\n         this.closetsStation = closetsStations;\n         this.dataSource = closetsStations;\n         this.updatedAt = this.dataSource[0].updatedAt\n      }\n    });\n  }\n  async findNearStations(select: any) {\n    let latBikeStation = select.pointsList.coordinates.substring(0, select.pointsList.coordinates.indexOf(\" \"));\n    let lngBikeStation = select.pointsList.coordinates.substring(select.pointsList.coordinates.indexOf(\" \") + 1, select.pointsList.coordinates.length);\n\n    let bikeStationCoords = {\n      lat:latBikeStation,\n      lng:lngBikeStation\n    }\n\n    let userCoords = {\n      lat: JSON.parse(localStorage.getItem('userCoords')).lat,\n      lng:JSON.parse(localStorage.getItem('userCoords')).lng\n    }\n    let setViewPoint = 'POINT(' + latBikeStation + ' ' + lngBikeStation+ ')';\n    this.tabledetailService.notifySelectedStationId(select.stationId);\n    this.routeService.getRoute(userCoords,bikeStationCoords).subscribe(\n      res=>{\n        this.routeService.createRouteLayer(res.features[0].geometry.coordinates);\n    }, err=>{\n      console.log(err)\n    });\n    this.closeDialog();\n    this.mapService.updateMapViewCenter(setViewPoint);\n  }\n\n  closeDialog() {\n    this.dialogRef.close();\n  }\n\n  getBackToMap() {\n    //this.mapAccordeon.open()\n  }\n}\n","<div>\n    <h4>Welcome to Madrid Mobility</h4>\n    <span>This is an app that provides transport information from EMTLab API</span>\n</div>\n","import { Component, OnInit } from '@angular/core';\n\n@Component({\n  selector: 'app-welcome-dialog',\n  templateUrl: './welcome-dialog.component.html',\n  styleUrls: ['./welcome-dialog.component.css']\n})\nexport class WelcomeDialogComponent implements OnInit {\n\n  constructor() { }\n\n  ngOnInit(): void {\n  }\n\n}\n","<div id=\"container\">\n    <h1>Welcome to Madrid Mobility</h1>\n    <h3>This app has been developed in order to provide data from the <a href=\"https://mobilitylabs.emtmadrid.es/\">EMT\n            API-REST service</a></h3>\n    <h3>and show it a map, using some GIS functions.</h3>\n\n    <h3>Before continue, I have to tell you that the town where you are located is registered just for statistical\n        reasons,\n        and please, if you agree, allow geolocation in your browser when required.</h3>\n    <div id=\"button\">\n        <button mat-raised-button color=\"primary\" (click)=\"navigateToMadridMobility()\">Carry on</button>\n    </div>\n</div>","import { Component, OnInit } from '@angular/core';\nimport {Router} from '@angular/router'\n\n@Component({\n  selector: 'app-welcome',\n  templateUrl: './welcome.component.html',\n  styleUrls: ['./welcome.component.css']\n})\nexport class WelcomeComponent implements OnInit {\n\n  constructor(private router: Router) { }\n\n  ngOnInit(): void {\n  }\nnavigateToMadridMobility(){\n  this.router.navigate(['map']);\n}\n}\n","<div *ngIf=\"streetsList.length >0\" style=\"margin-left: 5%;\">\n    <div >Address finder</div>\n    <mat-icon svgIcon=\"thumbs-up\" aria-hidden=\"false\" aria-label=\"Example thumbs up SVG icon\" matTooltip=\"Type and address. Ex: calle limón \"></mat-icon>\n    <div >\n        <form class=\"example-form\" [formGroup]=\"addressFinderForm\" style=\"display: table-cell;\">\n            <mat-form-field style=\"width: 300px;\">\n              <input type=\"text\" placeholder=\"Find address\" aria-label=\"Number\" matInput [formGroup]=\"addressFinderForm\"\n                [formControl]=\"addressFinderControl\" [matAutocomplete]=\"auto\" formControlName=\"addressToFind\" panelWidth=5>\n              <mat-autocomplete lass=\"autocompletable\" #auto=\"matAutocomplete\" (optionSelected)=\"onChangeStreet($event)\">\n                <mat-option *ngFor=\"let street of filteredStreets | async\" [value]=\"street.wholeAddress\">\n                  {{street.wholeAddress}}\n                </mat-option>\n              </mat-autocomplete>\n            </mat-form-field>\n          </form>\n    </div>\n</div>\n\n<div *ngIf=\"streetsList.length < 1\"  style=\"margin-left: 5%;\">\n  <div >Address finder</div>\n    <p>Address finder is temporarily disabled</p>\n</div>\n","import { Component, OnInit } from '@angular/core';\nimport { FormBuilder, FormControl, FormGroup, Validators } from '@angular/forms';\nimport { Observable } from 'rxjs';\nimport { map, startWith } from 'rxjs/operators';\nimport { StreetsService } from 'src/app/services/streets.service';\nimport { InfoCardService } from '../services/info-card.service';\n\nimport Feature from 'ol/Feature';\nimport Point from 'ol/geom/Point';\nimport { Vector as VectorSource } from 'ol/source';\nimport VectorLayer from 'ol/layer/Vector';\nimport Collection from 'ol/Collection';\nimport WKT from 'ol/format/WKT';\nimport { StyleService } from 'src/app/services/style.service';\nimport { MapService } from 'src/app/services/map.service';\nimport { MatIconRegistry } from '@angular/material/icon';\nimport { DomSanitizer } from '@angular/platform-browser';\nimport { StylePointsFeaturesService } from 'src/app/services/style-points-features.service';\n\n@Component({\n  selector: 'app-adress-finder',\n  templateUrl: './adress-finder.component.html',\n  styleUrls: ['./adress-finder.component.css']\n})\nexport class AdressFinderComponent implements OnInit {\n\n  addressFinderForm: FormGroup;\n  addressFinderControl = new FormControl();\n  filteredStreets: Observable<String[]>\n  streetsList: any[] = new Array;\n  format = new WKT();\n  foundAddressCollection = new Collection;\n\n  constructor(private streetsService: StreetsService,\n    private infoCardService: InfoCardService,\n    private stylePointsFeaturesService: StylePointsFeaturesService,\n    private mapService: MapService,\n    iconRegistry: MatIconRegistry,\n    sanitizer: DomSanitizer) {\n      \n    this.filteredStreets = this.addressFinderControl.valueChanges\n      .pipe(\n        startWith(''),\n        map(value => this._filterAdress(value))\n\n      );\n\n      iconRegistry.addSvgIcon(\n        'thumbs-up',\n        sanitizer.bypassSecurityTrustResourceUrl('assets/img/iconmonstr-plus-3.svg'));\n  }\n\n  ngOnInit(): void {\n\n    this.createAddressFinderForm();\n\n    this.streetsService.streetsList$.subscribe(data => {\n      if (data != null) {\n        this.streetsList = data;\n      }\n    })\n  }\n\n  createAddressFinderForm() {\n    this.addressFinderForm = new FormGroup({\n      addressToFind: new FormControl()\n    });\n  }\n\n  _filterAdress(value: string): any[] {\n    const filterValue = value;\n    let resultF: any[];\n    if (filterValue.length > 8) {\n      if (this.streetsList) {\n        resultF = this.streetsList.filter(street => {\n          if (street.wholeAddress != null) {\n            return street.wholeAddress.toLowerCase().includes(filterValue);\n          } else {\n            return false;\n          }\n        })\n      } else {\n        return null;\n      }\n    }\n    return resultF;\n  }\n\n  onChangeStreet(event: any) {\n    let address = event.option.value;\n    var matches = address.match(/(\\d+)/);\n    let streetWithOutNumber = address.substring(0, matches.index).trim() + '+';\n    let addressSplitted = address.split(\" \");\n    streetWithOutNumber += addressSplitted[0]\n    let cleanStreet = streetWithOutNumber.substring(streetWithOutNumber.indexOf(' '), streetWithOutNumber.length)\n    address = matches[0] + ',' + cleanStreet + ',madrid,spain';\n\n    //replace *****with you api key\n    this.infoCardService.getAdressCoordinates(address).subscribe(\n      data => {\n        //@ts-ignore\n        let foundAddressCoords = data.results[0].locations[0].latLng;\n\n        let formatCoords = 'POINT(' + foundAddressCoords.lng + ' ' + foundAddressCoords.lat + \" 216.7\" + ')';\n\n        let formatCoordsSplitted = formatCoords.split(' ');\n\n        let setViewPoint = formatCoordsSplitted[0] + ' ' + formatCoordsSplitted[1]+ ')';\n\n        let foundAddressCoordsFormatted = this.format.readFeature(formatCoords.replace(\n          /[\\W]*\\S+[\\W]*$/, '') + ')', { dataProjection: 'EPSG:4326', featureProjection: 'EPSG:3857' }).getGeometry().getCoordinates();\n\n        let foundAddressFeature = new Feature({\n          geometry: new Point(foundAddressCoordsFormatted)\n        });\n\n        this.stylePointsFeaturesService.applyStyleToFoundAdressMarker(foundAddressFeature);\n        this.foundAddressCollection.push(foundAddressFeature);\n\n        let foundAddressLayer = new VectorLayer({\n          name: 'foundAddress',\n          source: new VectorSource({\n            features: this.foundAddressCollection\n          })\n        })\n\n        this.mapService.map$.addLayer(foundAddressLayer);\n        \n        this.mapService.updateMapViewCenter(setViewPoint);\n      }\n    );\n  }\n\n}\n","<div style=\"width: 25%;\">\n  <mat-icon svgIcon=\"thumbs-up\" aria-hidden=\"false\" aria-label=\"Example thumbs up SVG icon\" matTooltip=\"Type a a number and find the nearest bike stations\"></mat-icon>\n  <div [formGroup]=\"positionCompositionForm\" >\n    <mat-form-field appearance=\"outline\">\n    <mat-label>Number of bike stations to be shown</mat-label>\n    <input matInput formControlName=\"numberOfResults\">\n    </mat-form-field>\n  </div>\n</div>\n<div style=\"width: 25%;\">\n  <button mat-raised-button color=\"primary\" (click)=\"getClosestStation()\" >Get nearests bike stations </button><br>\n</div>\n<p *ngIf=\"errorNumberResults\">Please, type an integer from 1 to 9</p>\n<button *ngIf=\"routeShowed\" mat-raised-button color=\"primary\" (click)=\"clearRoute()\" >Clear route </button>\n","import { Component, OnInit } from '@angular/core';\nimport { FormBuilder, FormControl, FormGroup, Validators } from '@angular/forms';\nimport { TabledetailComponent } from 'src/app/components/tabledetail/tabledetail.component';\nimport { BikesLayerService } from 'src/app/services/bikes-layer.service';\nimport { MapService } from 'src/app/services/map.service';\nimport { UserService } from 'src/app/services/user.service';\n\nimport { MatDialog, MatDialogRef, MAT_DIALOG_DATA } from '@angular/material/dialog';\nimport { InfoCardService } from '../services/info-card.service';\nimport { MatIconRegistry } from '@angular/material/icon';\nimport { DomSanitizer } from '@angular/platform-browser';\nimport { RoutesService } from 'src/app/services/routes.service';\n\n@Component({\n  selector: 'app-closestations',\n  templateUrl: './closestations.component.html',\n  styleUrls: ['./closestations.component.css']\n})\nexport class ClosestationsComponent implements OnInit {\n\n  positionCompositionForm: FormGroup;\n  errorNumberResults = false;\n  nearestBikeStations: any = new Array;\n  userPosition = { 'lat': null, 'lng': null };\n  routeShowed:boolean=false;\n\n  constructor(private bikesLayerService: BikesLayerService,\n    private infoCardService: InfoCardService,\n    private mapService: MapService,\n    private routeService: RoutesService,\n    public dialog: MatDialog,\n    iconRegistry: MatIconRegistry,\n    sanitizer: DomSanitizer) { \n      this.routeService.route$.subscribe(route=>{\n        if(route != null){\n          this.routeShowed = true;\n        }\n      })\n    }\n\n  ngOnInit(): void {\n    this.createForm();\n    this.mapService.sendUserPositionToInfoCard$.subscribe(data => {\n      if (data != null) {\n        if (typeof (data) === 'object') {\n          //@ts-ignore\n          this.userPosition.lat = data.lat;\n          //@ts-ignore\n          this.userPosition.lng = data.lng;\n        } else {\n          let fakeAddressSplt = String(data).split(' ');\n          //@ts-ignore\n          this.userPosition.lat = fakeAddressSplt[1];\n          //@ts-ignore\n          this.userPosition.lng = fakeAddressSplt[0];\n        }\n      }\n    })\n  }\n\n  createForm() {\n    this.positionCompositionForm = new FormGroup({\n      'numberOfResults': new FormControl(),\n    });\n  }\n\n  getClosestStation() {\n    var re = new RegExp(\"^[1-9]\\d*$\");\n    if (this.positionCompositionForm.get('numberOfResults').value != null && re.test(this.positionCompositionForm.get('numberOfResults').value)) {\n      this.errorNumberResults = false;\n\n      let params = {\n        'numberOfResults': parseFloat(this.positionCompositionForm.get('numberOfResults').value),\n        //@ts-ignore\n        'coordinates': 'POINT (' + this.userPosition.lng + ' ' + this.userPosition.lat + '),3857)'\n      }\n      this.bikesLayerService.getClosestsStations(params).subscribe(\n        data => {\n          this.nearestBikeStations = data;\n          this.openTableDetail();\n          if (this.nearestBikeStations.length > 0) {\n            this.positionCompositionForm.get('numberOfResults').reset();\n          } else {\n\n          }\n        }\n      );\n\n\n    } else {\n      this.errorNumberResults = true;\n    }\n  }\n\n  openTableDetail() {\n    this.infoCardService.notifyClosestStations(this.nearestBikeStations);\n    const dialogRef = this.dialog.open(TabledetailComponent, {\n      width: '600px',\n    });\n    dialogRef.afterClosed().subscribe(result => {\n    });\n  }\n\n  clearRoute(){\n    this.routeShowed=false;\n    this.routeService.clearRoute();\n  }\n\n}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { InfoCardComponent } from './info-card/info-card.component';\nimport { ReactiveFormsModule } from '@angular/forms';\nimport { MaterialModule } from '../material-module';\nimport { ClosestationsComponent } from './closestations/closestations.component';\nimport { AdressFinderComponent } from './adress-finder/adress-finder.component';\n\n\n@NgModule({\n  declarations: [InfoCardComponent, ClosestationsComponent, AdressFinderComponent],\n  imports: [\n    CommonModule,ReactiveFormsModule, MaterialModule\n  ],\n  exports:[InfoCardComponent]\n})\nexport class InfoCardModule { }\n","  <div class=\"info-card container\">\n    <div class=\"row\">\n      <div class=\"col-sm\">\n        <app-closestations></app-closestations>\n      </div>\n      <div class=\"col-sm\">\n        <app-adress-finder></app-adress-finder>\n      </div>\n    </div>\n  </div>","import { Component, OnInit } from '@angular/core';\nimport { InfoCardService } from '../services/info-card.service';\n\nimport { Observable } from 'rxjs';\nimport { map, startWith } from 'rxjs/operators';\n\nimport { FormBuilder, FormControl, FormGroup, Validators } from '@angular/forms';\nimport { MapService } from '../../services/map.service';\n\ndeclare let L;\n\n@Component({\n  selector: 'app-info-card',\n  templateUrl: './info-card.component.html',\n  styleUrls: ['./info-card.component.css']\n})\nexport class InfoCardComponent implements OnInit {\n\n  streets: any = new Array;\n  myForm: FormGroup;\n  errorNumberResults = false;\n  zoomButtontext: String = 'Zoom to my position';\n  userPosition;\n  mobile: boolean;\n\n  constructor(private infoCardService: InfoCardService,\n    private mapService: MapService) {\n  }\n\n  ngOnInit(): void {\n\n    this.createAddressForm();\n\n    this.mapService.sendUserPositionToInfoCard$.subscribe(userPosition => {\n      this.userPosition = userPosition;\n    });\n\n    this.mapService.sendDevice$.subscribe(mobile => {\n      console.log(mobile)\n      this.mobile = mobile;\n    });\n  }\n\n  createAddressForm() {\n    this.myForm = new FormGroup({\n      firstName: new FormControl()\n    });\n  }\n\n\n  zoomTo() {\n\n\n    if (this.zoomButtontext === 'Zoom to my position') {\n      this.zoomButtontext = 'Zoom global'\n      //@ts-ignore\n      let userPosition ={\n        'position':this.userPosition,\n        'option': 'userPosition'\n      }\n      this.infoCardService.zoomTo(userPosition);\n    } else {\n      this.zoomButtontext = 'Zoom to my position'\n      let globalPosition ={\n        'position': [40.4167754,-3.7037902],\n        'option':'global'\n      }\n      this.infoCardService.zoomTo(globalPosition);\n      //mapLeaflet.setView([40.4167754, -3.7037902], 13);\n    }\n  }\n\n  _filterAdress(value: string): any[] {\n    const filterValue = value;\n    let resultF: any[];\n    if (filterValue.length > 8) {\n      if (this.streets) {\n        resultF = this.streets.filter(street => {\n          if (street.wholeAddress != null) {\n            return street.wholeAddress.toLowerCase().includes(filterValue);\n          } else {\n            return false;\n          }\n        })\n      } else {\n        return null;\n      }\n    }\n    return resultF;\n  }\n\n  onChangeStreet(event: any) {\n    let address = event.option.value;\n    var matches = address.match(/(\\d+)/);\n    let streetWithOutNumber = address.substring(0, matches.index).trim() + '+';\n    let addressSplitted = address.split(\" \");\n    streetWithOutNumber += addressSplitted[0]\n    let cleanStreet = streetWithOutNumber.substring(streetWithOutNumber.indexOf(' '), streetWithOutNumber.length)\n    address = matches[0] + ',' + cleanStreet + ',madrid,spain';\n\n    //replace *****with you api key\n    this.infoCardService.getAdressCoordinates(address).subscribe(\n      res => {\n\n         var myIcon = L.icon({\n           iconSize: [41, 51],\n           iconAnchor: [20, 51],\n           popupAnchor: [-3, -76],\n           shadowSize: [68, 95],\n\n           shadowAnchor: [22, 94]\n         });\n         myIcon.options.iconUrl = 'assets/leaflet/point.png';\n         //@ts-ignore\n         this.infoCardService.sendFoundAdressIconToMap(L.marker([res.results[0].locations[0].latLng.lat, res.results[0].locations[0].latLng.lng], {\n          icon: myIcon, clickable:\n            true, draggable: 'false'\n        }));\n      }, err => {\n        console.log(err)\n      }\n    )\n  }\n\n}\n","import { Injectable } from '@angular/core';\nimport { HttpClient, HttpErrorResponse  } from '@angular/common/http';\nimport { Observable, throwError,BehaviorSubject } from 'rxjs';\nimport { catchError, retry } from 'rxjs/operators';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class InfoCardService {\n\n  private REST_API_SERVER = \"https://floating-reef-24535.herokuapp.com/api/EMTServices/\";\n  //private REST_API_SERVER = \"https://localhost:8081/api/bikes/EMTServices/\";\n\n  private closetsStationsListOut = new BehaviorSubject<any[]>(null);\n  private iconOut = new BehaviorSubject<any[]>(null);\n  private zoomToOut = new BehaviorSubject<any[]>(null);\n\n  notifyClosestsStations$ = this.closetsStationsListOut.asObservable();\n  sendFoundAdressIconToMap$ = this.iconOut.asObservable();\n  zoomTo$ = this.zoomToOut.asObservable();\n\n  constructor(private httpClient: HttpClient) { }\n\n  handleError(error: HttpErrorResponse) {\n    let errorMessage = 'Unknown error!';\n    if (error.error instanceof ErrorEvent) {\n      // Client-side errors\n      errorMessage = `Error: ${error.error.message}`;\n    } else {\n      // Server-side errors\n      errorMessage = `Error Code: ${error.status}\\nMessage: ${error.message}`;\n    }\n    window.alert(errorMessage);\n    return throwError(errorMessage);\n  }\n\n  \n\n  getClosestsStations(params): Observable<any> {\n    return this.httpClient.post(this.REST_API_SERVER+'findClosestStations', params).pipe(catchError(this.handleError));\n  }\n\n  getAdressCoordinates(address: string){\n    return this.httpClient.get('https://www.mapquestapi.com/geocoding/v1/address?key=rap9nA00BZ9zIZLP1eWHyyyrRkqGdFVX&location=' + address).pipe(catchError(this.handleError));\n  }\n\n  notifyClosestStations(closetsStations: any) {\n    this.closetsStationsListOut.next(closetsStations);\n  }\n\n  sendFoundAdressIconToMap(icon: any) {\n    this.iconOut.next(icon);\n  }\n\n  zoomTo(userPosition: any) {\n    this.zoomToOut.next(userPosition);\n  }\n}\n","<div  class=\"container legend-container\">\n    <div class=\"row\">\n       <strong> <a class=\"element\">Bike station info</a></strong>\n    </div>\n    <div class=\"row\">\n       <div  id=\"elements\"><img src=\"assets/img/vehicle_color_1.png\" width=\"20\" height=\"20\" class=\"element\">\n          <span>Available {{bikesOrSlots}}</span>\n       </div>\n    </div>\n    <div class=\"row\">\n       <div  id=\"elements\"><img src=\"assets/img/vehicle_color_2.png\" width=\"20\" height=\"20\" class=\"element\">\n          <span> No Available {{bikesOrSlots}}</span>\n       </div>\n    </div>\n    <div class=\"row\">\n      <div id=\"toggle\" class=\"element\" >\n         <div >\n           Watch available {{bikesOrSlots}} <mat-slide-toggle class=\"example-margin\" [checked]=\"checked\" [disabled]=\"disabled\"\n             (change)=\"setBikeOrDot($event)\">\n           </mat-slide-toggle> \n         </div>\n       </div>\n      </div>\n    <div class=\"row\">\n       <strong> <a>Districts info</a></strong><br>\n    </div>\n    <div class=\"row\">\n       <div>\n          <img src=\"assets/leaflet/grey_dot.png\" width=\"20\" height=\"20\" class=\"element\">\n          <span>0 Bikes </span>\n       </div>\n    </div>\n    <div class=\"row\">\n       <img src=\"assets/leaflet/yellow_dot.png\" width=\"20\" height=\"20\" class=\"element\">\n       <span>Less than 50 bikes</span>\n    </div>\n    <div class=\"row\">\n       <img src=\"assets/leaflet/blue_dot.png\" width=\"20\" height=\"20\" class=\"element\">\n       <span>More than 50 bikes</span>\n    </div>\n    <!-- <div class=\"row\">\n    <div id=\"toggle\" class=\"element\" >\n       <div >\n         See bikes accidents heat map <mat-slide-toggle class=\"example-margin\" [checked]=\"checked\" [disabled]=\"disabled\"\n           (change)=\"toggleSlide($event)\">\n         </mat-slide-toggle> \n       </div>\n     </div>\n    </div> -->\n\n    \n </div>","import { Component, OnInit } from '@angular/core';\nimport { BikesLayerService } from 'src/app/services/bikes-layer.service';\nimport { StyleService } from 'src/app/services/style.service';\nimport { LegendService } from '../services/legend.service';\n\n@Component({\n  selector: 'app-bikes-legend',\n  templateUrl: './bikes-legend.component.html',\n  styleUrls: ['./bikes-legend.component.css']\n})\nexport class BikesLegendComponent implements OnInit {\n\n  constructor(private styleService: StyleService, private bikesLayerService: BikesLayerService, private legendService: LegendService) { }\n\n  bikesOrSlots:string = 'bikes';\n  checked = false;\n  disabled = false;\n\n  ngOnInit(): void {\n  }\n\n  setBikeOrDot(bikeOrDot: string){\n    \n    //@ts-ignore\n    if(bikeOrDot.checked){\n      this.bikesOrSlots='slots';\n      this.bikesLayerService.createBikeStationsFeatures('slots');\n      this.legendService.toggleChange();\n    }else{\n      this.bikesOrSlots='bikes';\n      this.bikesLayerService.createBikeStationsFeatures('bikes');\n      this.legendService.toggleChange();\n    }\n  }\n\n  // toggleSlide(event){\n  //   if(event.checked){\n  //     this.globalService.showHeatMap();\n  //   }else{\n  //     this.globalService.hideHeatMap();\n  //   }\n  // }\n\n}\n","<div class=\"bus-stops-container\" class=\"bus-stop-container\">\n    <strong> <a class=\"element\">Bus stops in 500 meters</a></strong>\n    <div *ngFor=\"let busStop of busStops\" class=\"bus-stop\">\n        <p>{{busStop.name}}</p>\n        <div class=\"row\" style=\"padding: 10%;\" >\n            <div class=\"line-container\" *ngFor=\"let busLineBean of busStop.busLineBeanList\">{{busLineBean.line}}</div>\n        </div>\n    </div>\n</div>","import { Component, OnInit } from '@angular/core';\nimport { BusesService } from 'src/app/services/buses.service';\n\n@Component({\n  selector: 'app-buses-legend',\n  templateUrl: './buses-legend.component.html',\n  styleUrls: ['./buses-legend.component.css']\n})\nexport class BusesLegendComponent implements OnInit {\n\n  busStops: any[];\n\n  constructor(private busesService: BusesService) {\n    this.busesService.notifyBuses$.subscribe(busStops => {\n      if (busStops != null) {\n         this.busStops = busStops;\n      }\n    });\n   }\n\n  ngOnInit(): void {\n    \n  }\n\n}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { LegendComponent } from './legend/legend.component';\nimport {MaterialModule} from '../material-module';\nimport { BikesLegendComponent } from './bikes-legend/bikes-legend.component';\nimport { BusesLegendComponent } from './buses-legend/buses-legend.component'\nimport { AuthModuleModule } from '../auth-module/auth-module.module';\n\n\n@NgModule({\n  declarations: [LegendComponent, BikesLegendComponent, BusesLegendComponent],\n  imports: [\n    CommonModule, MaterialModule, AuthModuleModule\n  ],\n  exports:[\n    LegendComponent\n  ]\n})\nexport class LegendModule { }\n","<div *ngIf=\"showInLegend ==='legend'\">\r\n  <mat-tab-group class=\"container legend-container\">\r\n    <mat-tab label=\"BiciMad\"> <app-bikes-legend></app-bikes-legend> </mat-tab>\r\n    <mat-tab label=\"Buses\"> <app-buses-legend></app-buses-legend> </mat-tab>\r\n    <!-- <mat-tab label=\"Parking\" > <p (click)=\"getFreePlaces()\">test</p> </mat-tab> -->\r\n  </mat-tab-group>\r\n</div>\r\n<div *ngIf=\"showInLegend ==='login'\">\r\n  <div class=\"container legend-container\">\r\n    <app-login></app-login>\r\n  </div>\r\n</div>\r\n<div *ngIf=\"showInLegend ==='register'\">\r\n  <div class=\"container legend-container\">\r\n    <app-register></app-register>\r\n  </div>\r\n</div>","import { Component, OnInit } from '@angular/core';\r\nimport { AuthService } from 'src/app/auth-module/services/auth.service';\r\nimport { BikesLayerService } from 'src/app/services/bikes-layer.service';\r\nimport { ParkingService } from 'src/app/services/parking.service';\r\nimport { StyleService } from 'src/app/services/style.service';\r\nimport { UpperBarService } from 'src/app/upper-bar/services/upper-bar.service';\r\n@Component({\r\n  selector: 'app-legend',\r\n  templateUrl: './legend.component.html',\r\n  styleUrls: ['./legend.component.css']\r\n})\r\nexport class LegendComponent implements OnInit {\r\n\r\n  showInLegend: string = 'legend';\r\n\r\n  constructor(private upperBarService: UpperBarService, private authService: AuthService, private parkingService: ParkingService) { \r\n    this.upperBarService.uopenLogin$.subscribe(\r\n      data=>{\r\n        if(data != null){\r\n          this.showInLegend= data;\r\n        }else{\r\n          this.showInLegend= 'legend';\r\n        }\r\n        \r\n      }\r\n    )\r\n    this.authService.userToken$.subscribe(userToken => {\r\n      if(userToken != null){\r\n        this.showInLegend = 'legend';\r\n      }\r\n    })\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    this.showInLegend = 'legend';\r\n  }\r\n\r\n  getFreePlaces(){\r\n\r\n    let userLocation = localStorage.getItem('userLocationCoords').split(' ');\r\n\r\n    console.log(userLocation)\r\n\r\n    let params = {\r\n      'userToken':localStorage.getItem('JWT_TOKEN'),\r\n      'lat':userLocation[0],\r\n      'lng':userLocation[1]\r\n    }\r\n    this.parkingService.getFreeParkingPlaces(params).subscribe();\r\n  }\r\n}\r\n","import { Injectable } from '@angular/core';\nimport { BehaviorSubject } from 'rxjs';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class LegendService {\n\n  private toggleChangeOut = new BehaviorSubject<any>(null);\n\n  toggleChange$ = this.toggleChangeOut.asObservable();\n\n  constructor() { }\n\n  toggleChange(){\n    this.notifyToggleChange(0);\n  }\n\n  notifyToggleChange(zero:number){\n    this.toggleChangeOut.next(zero);\n  }\n}\n","import {NgModule} from '@angular/core';\r\nimport {MatButtonModule} from '@angular/material/button'\r\nimport {MatFormFieldModule} from '@angular/material/form-field';\r\nimport {MatInputModule} from '@angular/material/input';\r\nimport {MatSlideToggleModule} from '@angular/material/slide-toggle';\r\nimport {MatExpansionModule} from '@angular/material/expansion';\r\nimport {MatTableModule} from '@angular/material/table';\r\nimport {MatDialogModule} from '@angular/material/dialog';\r\nimport {MatAutocompleteModule} from '@angular/material/autocomplete';\r\nimport {MatSelectModule} from '@angular/material/select';\r\nimport {MatIconModule} from '@angular/material/icon';\r\nimport {MatTooltipModule} from '@angular/material/tooltip';\r\nimport {MatTabsModule} from '@angular/material/tabs';\r\nimport {MatToolbarModule} from '@angular/material/toolbar';\r\nimport {MatProgressSpinnerModule} from '@angular/material/progress-spinner';\r\n@NgModule({\r\n    exports:[\r\n        MatButtonModule,\r\n        MatFormFieldModule,\r\n        MatInputModule,\r\n        MatSlideToggleModule,\r\n        MatExpansionModule,\r\n        MatTableModule,\r\n        MatDialogModule,\r\n        MatAutocompleteModule,\r\n        MatSelectModule,\r\n        MatIconModule,\r\n        MatTooltipModule,\r\n        MatTabsModule,\r\n        MatToolbarModule,\r\n        MatProgressSpinnerModule\r\n    ]\r\n})\r\nexport class MaterialModule{}","import { Injectable } from '@angular/core';\nimport { HttpClient, HttpErrorResponse } from '@angular/common/http';\nimport { Observable, throwError } from 'rxjs';\nimport { catchError, retry, shareReplay } from 'rxjs/operators';\n\nimport Heatmap from 'ol/layer/Heatmap';\nimport { Vector as VectorSource } from 'ol/source';\nimport VectorLayer from 'ol/layer/Vector';\nimport Collection from 'ol/Collection';\nimport Feature from 'ol/Feature';\nimport WKT from 'ol/format/WKT';\nimport Point from 'ol/geom/Point';\nimport { MapService } from './map.service';\n@Injectable({\n  providedIn: 'root'\n})\nexport class BikeAccidentService {\n\n  private REST_API_SERVER = \"https://floating-reef-24535.herokuapp.com/api/bikes/EMTServices/\";\n  //private REST_API_SERVER = \"http://localhost:8081/api/bikes/EMTServices/\";\n\n  private bikeAccidents: any;\n\n  bikeAccidentsCollection = new Collection;\n\n  format = new WKT();\n\n  constructor(private httpClient: HttpClient, private mapService: MapService) {\n    this.getBikeAccidents();\n  }\n\n  handleError(error: HttpErrorResponse) {\n    let errorMessage = 'Unknown error!';\n    if (error.error instanceof ErrorEvent) {\n      // Client-side errors\n      errorMessage = `Error: ${error.error.message}`;\n    } else {\n      // Server-side errors\n      errorMessage = `Error Code: ${error.status}\\nMessage: ${error.message}`;\n    }\n    window.alert(errorMessage);\n    return throwError(errorMessage);\n  }\n\n  public getBikeAccidents(): Observable<any[]> {\n\n    this.httpClient.get(this.REST_API_SERVER + 'getBikeAccidents').subscribe(\n      res => {\n        this.createHeatMap(res)\n      }, err => {\n\n      }\n    )\n    return this.bikeAccidents;\n  }\n\n  createHeatMap(res) {\n\n    // res.forEach(bikeAccident => {\n\n    //   let bikeAccidentCoords = this.format.readFeature(bikeAccident.accidentPoint, { dataProjection: 'EPSG:4326', featureProjection: 'EPSG:3857' }).getGeometry().getCoordinates()\n\n\n    //   let bikeAccidentFeature = new Feature({\n    //     geometry: new Point(bikeAccidentCoords)\n    //   });\n    //   this.bikeAccidentsCollection.push(bikeAccidentFeature);\n    // });\n\n    // let bikeAccidentsLayer = new VectorLayer({\n    //   name: 'bikeAccidents',\n    //   source: new VectorSource({\n    //     features: this.bikeAccidentsCollection\n    //   })\n    // })\n    // let heatmap = new Heatmap({\n    //   source: bikeAccidentsLayer\n    // });\n\n    //this.mapService.map$.addLayer(heatmap);\n\n  }\n\n}\n","import { HttpClient } from '@angular/common/http';\r\nimport { Injectable } from '@angular/core';\r\nimport { Observable } from 'rxjs/internal/Observable';\r\nimport { catchError } from 'rxjs/operators';\r\nimport { AuthModel } from '../models/authResponse.model';\r\n\r\nimport Feature from 'ol/Feature';\r\nimport Point from 'ol/geom/Point';\r\nimport { Vector as VectorSource } from 'ol/source';\r\nimport VectorLayer from 'ol/layer/Vector';\r\nimport Collection from 'ol/Collection';\r\n\r\nimport WKT from 'ol/format/WKT';\r\nimport { MapService } from './map.service';\r\nimport { HttpErrorResponse } from '@angular/common/http';\r\nimport { throwError,BehaviorSubject } from 'rxjs';\r\nimport { StyleService } from './style.service';\r\nimport { AuthModuleModule } from '../auth-module/auth-module.module';\r\nimport { AuthService } from '../auth-module/services/auth.service';\r\nimport { TabledetailService } from '../components/tabledetail/services/tabledetail.service';\r\nimport { StylePointsFeaturesService } from './style-points-features.service';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class BikesLayerService {\r\n\r\n  bikeStations;\r\n\r\n  token: string;\r\n\r\n  private bikesOut = new BehaviorSubject<boolean>(null);\r\n\r\n  bikes$ = this.bikesOut.asObservable();\r\n\r\n  private REST_API_SERVER = \"https://floating-reef-24535.herokuapp.com/api/bikes/EMTServices/\";\r\n  //private REST_API_SERVER = \"http://localhost:8081/api/bikes/EMTServices/\";\r\n\r\n  biciMadAPIStatus;\r\n  accesToken;\r\n  response: any;\r\n  format = new WKT();\r\n  //bikeStations: any[] = new Array;\r\n  bikeStationsCollection = new Collection;\r\n  selectedBikeStationCollection = new Collection;\r\n  userPosition = { 'lat': null, 'lng': null };\r\n  stationId;\r\n\r\n  constructor(private httpClient: HttpClient, \r\n    private mapService : MapService,\r\n    private stylePointsFeaturesService: StylePointsFeaturesService,\r\n    private authService: AuthService,\r\n    private tabledetailService:TabledetailService) {\r\n\r\n      this.mapService.sendUserPositionToInfoCard$.subscribe(data => {\r\n        if (data != null) {\r\n          if (typeof (data) === 'object') {\r\n            //@ts-ignore\r\n            this.userPosition.lat = data.lat;\r\n            //@ts-ignore\r\n            this.userPosition.lng = data.lng;\r\n            this.bikeStations= this.getBikeStations();\r\n          } else {\r\n            let fakeAddressSplt = String(data).split(' ');\r\n            //@ts-ignore\r\n            this.userPosition.lat = fakeAddressSplt[1];\r\n            //@ts-ignore\r\n            this.userPosition.lng = fakeAddressSplt[0];\r\n            this.bikeStations= this.getBikeStations();\r\n          }\r\n        }\r\n      })\r\n    \r\n      this.authService.emtToken$.subscribe(token=>{\r\n        if(token != null){\r\n          this.token = token;\r\n          this.bikeStations= this.getBikeStations();\r\n        }\r\n      })\r\n\r\n      this.tabledetailService.selectedStationId$.subscribe(stationId=>{\r\n        if(stationId != null){\r\n          this.stationId = stationId;\r\n          this.addSelected();\r\n        }\r\n      })\r\n  }\r\n\r\n  handleError(error: HttpErrorResponse) {\r\n    let errorMessage = 'Unknown error!';\r\n    if (error.error instanceof ErrorEvent) {\r\n      // Client-side errors\r\n      errorMessage = `Error: ${error.error.message}`;\r\n    } else {\r\n      // Server-side errors\r\n      errorMessage = `Error Code: ${error.status}\\nMessage: ${error.message}`;\r\n    }\r\n    window.alert(errorMessage);\r\n    return throwError(errorMessage);\r\n  }\r\n\r\n  getClosestsStations(params): Observable<any> {\r\n    return this.httpClient.post(this.REST_API_SERVER+'findClosestStations', params).pipe(catchError(this.handleError));\r\n  }\r\n\r\n\r\n\r\n  getBikeStations(){\r\n    if(this.token != undefined && this.userPosition.lng != undefined){\r\n      this.httpClient.get(this.REST_API_SERVER+'checkAvaibility',{\r\n        params: {\r\n          'emtToken': this.token,\r\n        }\r\n      }\r\n     // this.httpClient.get('http://localhost:8081/api/EMTServices/checkAvaibility',\r\n  //    params: {\r\n  //     'emtToken': this.token,\r\n  //   }\r\n  // }\r\n      ).subscribe(\r\n        res =>{\r\n          this.response = res;\r\n          this.createBikeStationsFeatures();\r\n        }\r\n      )\r\n    }\r\n    \r\n  }\r\n\r\n  createBikeStationsFeatures(bikeOrSlot?: string){\r\n    this.bikeStationsCollection = new Collection;\r\n    this.response.forEach(bikeStation =>{\r\n\r\n      let splitCoords = bikeStation.pointsList.coordinates.split(' ');\r\n\r\n      let formatCoords= 'POINT('+splitCoords[0]+ ' '+ splitCoords[1]+\" 216.7\"+')';\r\n\r\n      let bikeStationCoords = this.format.readFeature(formatCoords.replace(\r\n        /[\\W]*\\S+[\\W]*$/, '') + ')', { dataProjection: 'EPSG:4326', featureProjection: 'EPSG:3857' }).getGeometry().getCoordinates();\r\n\r\n        let bikeStationFeature = new Feature({\r\n          geometry: new Point(bikeStationCoords)\r\n        });\r\n\r\n        bikeStationFeature.setId(bikeStation.stationId);\r\n\r\n        bikeStationFeature.setProperties({ 'availableBikes':bikeStation.availableBikes, 'availableSlots': bikeStation.freeDocks, \r\n        'stationId':bikeStation.stationId, 'name':bikeStation.name, 'updatedAt':bikeStation.updatedAt, 'address':bikeStation.address });\r\n  \r\n        if(bikeOrSlot === undefined){\r\n          this.stylePointsFeaturesService.applyStyleToMarker(bikeStationFeature,bikeStation);\r\n        }else{\r\n          this.stylePointsFeaturesService.applyStyleToMarker(bikeStationFeature,bikeStation, bikeOrSlot);\r\n        }\r\n        \r\n        this.bikeStationsCollection.push(bikeStationFeature);\r\n    })\r\n\r\n    let bikeStationsLayer = new VectorLayer({\r\n\t\t\tname: 'bikeStations',\r\n\t\t\tsource: new VectorSource({\r\n\t\t\t\tfeatures: this.bikeStationsCollection\r\n\t\t\t})\r\n    })\r\n\r\n\r\n  for(let i = 0; i < this.mapService.map$.getLayers().getArray().length;i++){\r\n    if(this.mapService.map$.getLayers().getArray()[i].getProperties().name === 'bikeStations'){\r\n      this.mapService.map$.removeLayer(this.mapService.map$.getLayers().getArray()[i]);\r\n    }\r\n  } \r\n    this.mapService.map$.addLayer(bikeStationsLayer);\r\n    \r\n    this.notifyBikes(true);\r\n  }\r\n\r\n  notifyBikes(bikesLoaded){\r\n    this.bikesOut.next(bikesLoaded)\r\n  }\r\n\r\n  addSelected(){\r\n    this.removeSelectedBikeStation();\r\n    for(let i = 0; i < this.mapService.map$.getLayers().getArray().length;i++){\r\n      \r\n      if(this.mapService.map$.getLayers().getArray()[i].getProperties().name === 'bikeStations'){\r\n        let selectedFeature = this.mapService.map$.getLayers().getArray()[i].getSource().getFeatureById(this.stationId);\r\n        let selectedFeatureCoords =  selectedFeature.getGeometry().getCoordinates();\r\n        let bikeStationFeature = new Feature({\r\n          geometry: new Point(selectedFeatureCoords)\r\n        });\r\n\r\n        bikeStationFeature.setId(this.stationId.stationId);\r\n\r\n        //bikeStationFeature.setProperties({ 'availableBikes':bikeStation.availableBikes, 'availableSlots': bikeStation.freeDocks, 'stationId':bikeStation.stationId });\r\n        this.stylePointsFeaturesService.applyStyleToSelectedFeature(bikeStationFeature);\r\n\r\n        this.selectedBikeStationCollection = new Collection;\r\n        this.selectedBikeStationCollection.push(bikeStationFeature);\r\n\r\n        let selectedbikeStationLayer = new VectorLayer({\r\n          name: 'selectedBikeStation',\r\n          source: new VectorSource({\r\n            features: this.selectedBikeStationCollection\r\n          })\r\n        })\r\n\r\n        this.mapService.map$.addLayer(selectedbikeStationLayer);\r\n        break;\r\n      }\r\n      \r\n    } \r\n  }\r\n\r\n  removeSelectedBikeStation(){\r\n    for(let i = 0; i < this.mapService.map$.getLayers().getArray().length;i++){\r\n      \r\n      if(this.mapService.map$.getLayers().getArray()[i].getProperties().name === 'selectedBikeStation'){\r\n        this.mapService.map$.removeLayer(this.mapService.map$.getLayers().getArray()[i]);\r\n      }}\r\n  }\r\n\r\n}\r\n","import { HttpClient } from '@angular/common/http';\nimport { Injectable } from '@angular/core';\nimport { catchError } from 'rxjs/operators';\nimport { Observable } from 'rxjs/internal/Observable';\nimport { BehaviorSubject } from 'rxjs';\nimport { AuthService } from '../auth-module/services/auth.service';\nimport { MapService } from './map.service';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class BusesService {\n\n  private REST_API_SERVER = \"https://floating-reef-24535.herokuapp.com/api/buses/EMTServices/\";\n  //private REST_API_SERVER = \"http://localhost:8081/api/buses/EMTServices/\";\n\n  token: string;\n\n  userPosition = { 'lat': null, 'lng': null };\n\n  private busesListOut = new BehaviorSubject<any[]>(null);\n  notifyBuses$ = this.busesListOut.asObservable();\n\n  constructor(private httpClient: HttpClient,private authService: AuthService, private mapService: MapService) {\n    //unavailable by now\n    //this.getBusStops();\n    this.authService.emtToken$.subscribe(token=>{\n      if(token != null){\n        this.token = token;\n        this.getBusStopsAroundUser();\n      }\n    });\n    this.mapService.sendUserPositionToInfoCard$.subscribe(data => {\n      if (data != null) {\n        if (typeof (data) === 'object') {\n          //@ts-ignore\n          this.userPosition.lat = data.lat;\n          //@ts-ignore\n          this.userPosition.lng = data.lng;\n          this.getBusStopsAroundUser();\n        } else {\n          let fakeAddressSplt = String(data).split(' ');\n          //@ts-ignore\n          this.userPosition.lat = fakeAddressSplt[1];\n          //@ts-ignore\n          this.userPosition.lng = fakeAddressSplt[0];\n          this.getBusStopsAroundUser();\n        }\n      }\n    })\n   }\n\n  getBusStops(){\n\n    this.httpClient.get(this.REST_API_SERVER+'getBusStops').subscribe(\n    //this.httpClient.get('http://localhost:8081/api/buses/EMTServices/getBusStops').subscribe(\n      res=>{\n        console.log(res)\n      }\n    )\n\n  }\n\n  getBusStopsAroundUser(){\n\n    if(this.token != undefined && this.userPosition.lng != undefined){\n      let lng = this.userPosition.lng;\n      let lat = this.userPosition.lat;\n  \n      this.httpClient.get(this.REST_API_SERVER+'getBusStopsAroundUser', {\n        params: {\n          'emtToken':this.token,\n          'lng': lng,\n          'lat': lat,\n        }\n      }).subscribe(\n        res=>{\n          this.notifyBuses(res);\n        },\n        err =>{\n        }\n      )\n    }\n  }\n\n  notifyBuses(busStops: any) {\n    this.busesListOut.next(busStops);\n  }\n}\n","import { HttpClient } from '@angular/common/http';\nimport { Injectable } from '@angular/core';\n\nimport * as olProj from 'ol/proj';\nimport Polygon from 'ol/geom/Polygon';\nimport MultiPolygon from 'ol/geom/MultiPolygon';\nimport Feature from 'ol/Feature';\nimport Collection from 'ol/Collection';\nimport VectorLayer from 'ol/layer/Vector';\nimport { Vector as VectorSource } from 'ol/source';\nimport { Style, Icon as IconStyle, Text, Fill, Stroke, Circle as CircleStyle } from 'ol/style';\n\nimport { MapService } from './map.service';\nimport { StyleService } from './style.service';\nimport { BikesLayerService } from './bikes-layer.service';\nimport { StylePolygonFeaturesService } from './style-polygon-features.service';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class DistrictsService {\n\n  response: any;\n  districtsFeaturesCollection = new Collection;\n  alreadyDistricts: boolean = false;\n  \n  constructor(private httpClient: HttpClient, private mapService: MapService, private stylePolygonFeaturesService: StylePolygonFeaturesService, private bikesService: BikesLayerService) {\n    \n    this.bikesService.bikes$.subscribe(bikes=>{\n      if(bikes && !this.alreadyDistricts){\n        this.getDistricts()\n        this.alreadyDistricts = true;\n      }\n      \n    })\n  }\n\n  getDistricts() {\n    this.httpClient.get('https://floating-reef-24535.herokuapp.com/api/urban/EMTServices/getDistricts').subscribe(\n     // this.httpClient.get('http://localhost:8081/api/urban/EMTServices/getDistricts').subscribe(\n      res => {\n        this.response = res;\n        this.createDistrictsFeatures()\n      },\n      err=>{\n        console.log(err)\n      }\n    )\n  }\n\n  createDistrictsFeatures() {\n\n    let totalBikes = 0;\n    let districtsArrayCoords = new Array;\n    let districtsArrayInfo = new Array;\n\n    \n    for (let i = 0; i < this.response.length; i++) {\n      let pair = this.response[i].geom.substring(16, this.response[i].geom.length - 3).split(',')\n      let coordsDistrictArray = new Array;\n      let districtObj = {\n        'totalBikes':null,\n        'districtName':null\n      }\n    \n      for (let j = 0; j < pair.length; j++) {\n        let coordsPair = new Array;\n        pair[j].trim();\n        let split = pair[j].trim().split(' ')\n        let lat = split[0]\n        let lng = split[1]\n        coordsPair.push(parseFloat(lat));\n        coordsPair.push(parseFloat(lng));\n        coordsDistrictArray.push(coordsPair);\n      }\n      districtsArrayCoords.push(coordsDistrictArray)\n      districtObj.totalBikes = this.response[i].totalBikes;\n      districtObj.districtName = this.response[i].name;\n      districtsArrayInfo.push(districtObj)\n    }\n    for (let i = 0; i < districtsArrayCoords.length; i++) {\n      //for(let j = 0; j < districtsArrayCoords[i].length; j++){\n        let coorsTranform = districtsArrayCoords[i].map((coordinate) => {\n          return olProj.transform([coordinate[0], coordinate[1]], 'EPSG:4326', 'EPSG:3857');\n        });\n        let feature = new Feature({\n  \n          geometry: new Polygon([\n            coorsTranform\n          ])\n        });\n  \n        feature.setProperties({'totalBikes':districtsArrayInfo[i]})\n  \n         this.stylePolygonFeaturesService.applyStyleToDistricts(feature);\n        // feature.setId(coordsArray[i].name);\n    \n        this.districtsFeaturesCollection.push(feature)\n     // }\n      \n    }\n\n    let districtsLayer = new VectorLayer({\n\t\t\tname: 'districts',\n\t\t\tsource: new VectorSource({\n\t\t\t\tfeatures: this.districtsFeaturesCollection\n\t\t\t})\n    })\n    this.mapService.map$.addLayer(districtsLayer);\n\n    let bikeStationsLayer;\n\n    //putting pins over districts layer\n    for(let i = 0; i < this.mapService.map$.getLayers().getArray().length;i++){\n      if(this.mapService.map$.getLayers().getArray()[i].getProperties().name === 'bikeStations'){\n        console.log(this.mapService.map$.getLayers().getArray()[i].getProperties().name )\n         bikeStationsLayer = this.mapService.map$.getLayers().getArray()[i];\n        this.mapService.map$.removeLayer(this.mapService.map$.getLayers().getArray()[i]);\n      }\n    } \n    this.mapService.map$.addLayer(bikeStationsLayer);\n  }\n\n  \n\n  applyStyleToDistrict(feature){\n\n    let plots_styles = [];\n\n    plots_styles.push(\n\n      new Style({\n        fill: new Fill({\n          color: [255, 255, 255, 0.5]\n        }),\n        text: new Text({\n\t\t\t\t\t \ttextAlign: 'center',\n\t\t\t\t\t \tfont: '9px',\n\t\t\t\t\t \ttextBaseline: 'top',\n\t\t\t\t\t \t// text: plotInfo.name,\n\t\t\t\t\t \tscale: 1.5,\n\t\t\t\t\t \toffsetX: 0,\n\t\t\t\t\t \toffsetY: 4,\n\t\t\t\t\t \t fill: new Fill({\n\t\t\t\t\t \t \tcolor: 'black'\n\t\t\t\t\t \t }),\n\t\t\t\t\t \t\n\t\t\t\t\t \tstroke: new Stroke({\n\t\t\t\t\t \t\twidth: 0\n\t\t\t\t\t \t})\n\t\t\t\t\t })\n      })\n    );\n\n    feature.setStyle(plots_styles);\n\n  }\n}\n","import { Injectable } from '@angular/core';\r\nimport { Observable, throwError,BehaviorSubject } from 'rxjs';\r\nimport { catchError, retry } from 'rxjs/operators';\r\n\r\n//OpenLayers\r\nimport { Map } from 'ol';\r\nimport { defaults as defaultInteractions } from 'ol/interaction';\r\nimport WKT from 'ol/format/WKT';\r\n//import Icon from 'ol/style/Icon';\r\nimport Feature from 'ol/Feature';\r\nimport TileLayer from 'ol/layer/Tile.js';\r\nimport { BingMaps } from 'ol/source';\r\nimport Select from 'ol/interaction/Select';\r\nimport { OSM } from 'ol/source';\r\nimport { Vector as VectorSource } from 'ol/source';\r\nimport { Vector as VectorLayer } from 'ol/layer';\r\nimport View from 'ol/View';\r\nimport { getCenter } from 'ol/extent';\r\n//import { TranslateService } from '@ngx-translate/core';\r\n//import * as moment from 'moment';\r\n\r\nimport { HttpClient } from '@angular/common/http';\r\nimport { stringify } from 'querystring';\r\nimport { InfoPopupComponent } from '../components/info-popup/info-popup.component';\r\nimport { MatDialog } from '@angular/material/dialog';\r\nimport { LegendService } from '../legend/services/legend.service';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class MapService {\r\n\r\n  map;\r\n  layers = [];\r\n  viewCoordinates: String = 'POINT(-3.703606430985161 40.41666320878426)';\r\n  view;\r\n  format = new WKT();\r\n  selectIndex: number=0;\r\n\r\n  private userPositionOut = new BehaviorSubject<any[]>(null);\r\n  private deviceOut = new BehaviorSubject<boolean>(null);\r\n  sendUserPositionToInfoCard$ = this.userPositionOut.asObservable();\r\n  sendDevice$ = this.deviceOut.asObservable();\r\n\r\n  constructor(public dialog: MatDialog,private legendService: LegendService) {\r\n    this.legendService.toggleChange$.subscribe(index =>{\r\n      if(index != null){\r\n        this.selectIndex=index;\r\n      }\r\n    })\r\n   }\r\n\r\n  sendUserPositionToInfoCard(userPosition: any) {\r\n    this.userPositionOut.next(userPosition);\r\n  }\r\n\r\n  sendDevice(device: boolean){\r\n    this.deviceOut.next(device);\r\n  }\r\n\r\n  get map$() {\r\n    return this.map;\r\n  }\r\n\r\n  renderMap() {\r\n    this.layers = [\r\n      new TileLayer({\r\n        name: 'base',\r\n        source: new BingMaps({\r\n          key: 'AlqHetBTtIFed0g61VUmEq079AmyyXfR9FPcqzBt13dvYZsuowl7ZTMFtWJik0LL',\r\n          imagerySet: ['CanvasDark']\r\n        })\r\n      })\r\n    ];\r\n\r\n    this.view = new View({\r\n      center: this.format.readFeature(this.viewCoordinates, { dataProjection: 'EPSG:4326', featureProjection: 'EPSG:3857' }).getGeometry().getCoordinates(),\r\n      zoom: 17,\r\n      maxZoom: 20,\r\n    });\r\n\r\n    let interactions = defaultInteractions({ altShiftDragRotate: false, pinchRotate: false });\r\n\r\n    this.map = new Map({\r\n      layers: this.layers,\r\n      target: document.getElementById('map'),\r\n      controls: [],\r\n      view: this.view,\r\n      interactions: interactions\r\n\r\n    });\r\n  }\r\n\r\n  updateMapViewCenter(viewCoordinates){\r\n    this.viewCoordinates = new String;\r\n    \r\n    this.viewCoordinates = viewCoordinates;\r\n    this.view = new View({\r\n      center: this.format.readFeature(this.viewCoordinates, { dataProjection: 'EPSG:4326', featureProjection: 'EPSG:3857' }).getGeometry().getCoordinates(),\r\n      zoom: 17,\r\n      maxZoom: 20,\r\n    });\r\n    \r\n    this.map.setView(this.view)\r\n  }\r\n\r\n  selectOnMap(){\r\n    let bikeStationsLayerIndex;\r\n    let dialog = this.dialog;\r\n    for(let i = 0; i < this.map$.getLayers().getArray().length;i++){\r\n      if(this.map$.getLayers().getArray()[i].values_.name === 'bikeStations'){\r\n        bikeStationsLayerIndex=i;\r\n      }\r\n    }\r\n    let targetLayer = this.map$.getLayers().getArray()[bikeStationsLayerIndex];\r\n    \r\n     let select = new Select({\r\n       layers: [targetLayer],\r\n       //style:selectStyle\r\n     });\r\n     \r\n      select.getFeatures().on('change:length', function (e) {\r\n        var feature_buff = select.getFeatures();\r\n        if(feature_buff.getLength() >0){\r\n            for (var i = 0; i < feature_buff.getLength(); i++) {\r\n              const dialogRef = dialog.open(InfoPopupComponent, {\r\n                width: '600px',\r\n              });\r\n              dialogRef.componentInstance.totalBikes = feature_buff.item(0).values_.availableBikes;\r\n              dialogRef.componentInstance.availableSlots = feature_buff.item(0).values_.availableSlots;\r\n              dialogRef.componentInstance.name = feature_buff.item(0).values_.name;\r\n              dialogRef.componentInstance.address = feature_buff.item(0).values_.address;\r\n              dialogRef.componentInstance.updatedAt = feature_buff.item(0).values_.updatedAt;\r\n            }\r\n          \r\n          //detecta cuando no se hace click sobre alguna feature\r\n        }else{\r\n          // vehiclesRoutesService.openInfoCard(null);\r\n          // sharedService.updateVehicleSelection(null);\r\n        }\r\n         \r\n      });\r\n      if(this.selectIndex <1){\r\n        this.selectIndex++;\r\n        this.map$.addInteraction(select);\r\n      }\r\n  }\r\n}\r\n","import { HttpErrorResponse } from '@angular/common/http';\nimport { HttpClient } from '@angular/common/http';\nimport { Injectable } from '@angular/core';\nimport { Observable, throwError } from 'rxjs';\nimport { catchError } from 'rxjs/operators';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class ParkingService {\n\n  private REST_API_SERVER = \"http://localhost:8081/api/parking/EMTServices/\";\n\n  constructor(private httpClient: HttpClient) { }\n\n  getFreeParkingPlaces(params):Observable<any>{\n    return this.httpClient.post(this.REST_API_SERVER+'checkIfUserInParking', params).pipe(catchError(error => {\n      if (error instanceof HttpErrorResponse && error.status === 401) {\n        //return this.handle401Error(request, next);\n      } else {\n        console.log(error)\n        return throwError(error);\n      }\n    }));\n  }\n}\n","import { HttpClient, HttpErrorResponse } from '@angular/common/http';\nimport { Injectable } from '@angular/core';\nimport { BehaviorSubject, Observable, throwError } from 'rxjs';\nimport { catchError } from 'rxjs/operators';\n\nimport Feature from 'ol/Feature';\nimport LineString from 'ol/geom/Point';\nimport { Vector as VectorSource } from 'ol/source';\nimport VectorLayer from 'ol/layer/Vector';\nimport Collection from 'ol/Collection';\nimport WKT from 'ol/format/WKT';\nimport { MapService } from './map.service';\nimport { StyleLineFeaturesService } from './style-line-features.service';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class RoutesService {\n\n  lineCollection = new Collection;\n  format = new WKT();\n\n  private routeOut = new BehaviorSubject<boolean>(null);\n\n  route$ = this.routeOut.asObservable();\n\n  constructor(private httpClient: HttpClient, private mapService:MapService, private styleLineFeaturesService:StyleLineFeaturesService) { }\n\n  getRoute(userCoords,bikeStationCoords):Observable<any>{\n    \n    let userCoordsStr = userCoords.lng+ ','+userCoords.lat;\n    let bikeStationCoordsStr = bikeStationCoords.lat+ ','+bikeStationCoords.lng\n\n     //http://www.mapquestapi.com/directions/v2/route?key=rap9nA00BZ9zIZLP1eWHyyyrRkqGdFVX&from=Clarendon Blvd,Arlington,VA&to=2400+S+Glebe+Rd,+Arlington,+VA\n    return this.httpClient.get('https://api.openrouteservice.org/v2/directions/foot-walking?api_key=5b3ce3597851110001cf62485f1920e92dc94c50bc5c40c1b2d2ed46&start='\n     +userCoordsStr+'&end='+bikeStationCoordsStr).pipe(catchError(error => {\n      if (error instanceof HttpErrorResponse && error.status === 401) {\n        //return this.handle401Error(request, next);\n      } else {\n        console.log(error)\n        return throwError(error);\n      }\n    }));\n  }\n\n  createRouteLayer(coordinates){\n    this.lineCollection=new Collection;\n    coordinates.forEach(coordinates =>{\n\n      //let splitCoords = coordinates.pointsList.coordinates.split(' ');\n\n      let formatCoords= 'POINT('+coordinates[0]+ ' '+ coordinates[1]+\" 216.7\"+')';\n\n      let lineCoords = this.format.readFeature(formatCoords.replace(\n        /[\\W]*\\S+[\\W]*$/, '') + ')', { dataProjection: 'EPSG:4326', featureProjection: 'EPSG:3857' }).getGeometry().getCoordinates();\n\n        let lineFeature = new Feature({\n          geometry: new LineString(lineCoords)\n        });\n\n        // bikeStationFeature.setId(coordinates.stationId);\n\n        // bikeStationFeature.setProperties({ 'availableBikes':coordinates.availableBikes, 'availableSlots': coordinates.freeDocks, \n        // 'stationId':coordinates.stationId, 'name':coordinates.name, 'updatedAt':coordinates.updatedAt, 'address':coordinates.address });\n  \n           //this.styleLineFeaturesService.styleRoute(lineFeature);\n        \n        this.lineCollection.push(lineFeature);\n    });\n\n    let routeLayer = new VectorLayer({\n\t\t\tname: 'route',\n\t\t\tsource: new VectorSource({\n\t\t\t\tfeatures: this.lineCollection\n\t\t\t})\n    })\n    this.clearRoute();\n    this.mapService.map$.addLayer(routeLayer);\n    this.notifyRoute();\n  }\n\n  clearRoute(){\n    for(let i = 0; i < this.mapService.map$.getLayers().getArray().length;i++){\n      if(this.mapService.map$.getLayers().getArray()[i].getProperties().name === 'route'){\n        this.mapService.map$.removeLayer(this.mapService.map$.getLayers().getArray()[i]);\n      }\n    }\n  }\n\n  notifyRoute(){\n    this.routeOut.next(true);\n  }\n}\n","import { Injectable } from '@angular/core';\n\nimport { Style, Icon as IconStyle, Text, Fill, Stroke, Circle as CircleStyle } from 'ol/style';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class StreetsStyleService {\n\n  constructor() { }\n\n  styleStreets(feature){\n    let lineStyle = [];\n\n    let streetsStyle = new Style({\n      stroke: new Stroke({ color: 'yellow', width: 5 }),\n    })\n    lineStyle.push(streetsStyle);\n    feature.setStyle(lineStyle);\n  }\n}\n","import { HttpClient, HttpErrorResponse } from '@angular/common/http';\nimport { Injectable } from '@angular/core';\nimport { BehaviorSubject, Observable, throwError } from 'rxjs';\nimport { catchError } from 'rxjs/operators';\n\nimport Feature from 'ol/Feature';\nimport LineString from 'ol/geom/LineString';\nimport { Vector as VectorSource } from 'ol/source';\nimport VectorLayer from 'ol/layer/Vector';\nimport Collection from 'ol/Collection';\n\n\nimport WKT from 'ol/format/WKT';\nimport { MapService } from './map.service';\nimport { StreetsStyleService } from './streets-style.service';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class StreetsService {\n\n  private streets;\n  streetsCollection = new Collection;\n  streetsList =  new Array;\n\n  format = new WKT();\n\n  private REST_API_SERVER = \"https://floating-reef-24535.herokuapp.com/api/urban/EMTServices/\";\n  //private REST_API_SERVER = \"http://localhost:8081/api/urban/EMTServices/\";\n\n  private streetsListOut = new BehaviorSubject<any[]>(null);\n\n  streetsList$ = this.streetsListOut.asObservable();\n\n  constructor(private httpClient: HttpClient,private mapService : MapService, private streetsStyleService:StreetsStyleService) {\n    this.getStreets().subscribe(data =>{\n      this.notifyStreets(data)\n    })\n\n    this.getStreetsTopo();\n   }\n\n  handleError(error: HttpErrorResponse) {\n    let errorMessage = 'Unknown error!';\n    if (error.error instanceof ErrorEvent) {\n      // Client-side errors\n      errorMessage = `Error: ${error.error.message}`;\n    } else {\n      // Server-side errors\n      errorMessage = `Error Code: ${error.status}\\nMessage: ${error.message}`;\n    }\n    window.alert(errorMessage);\n    console.log(errorMessage)\n    return throwError(errorMessage);\n  }\n\n  getStreets(): Observable<any>{\n    return this.streets = this.httpClient.get(this.REST_API_SERVER+'getStreets').pipe(catchError(this.handleError));\n  }\n\n  getStreetsTopo(){\n      this.httpClient.get(this.REST_API_SERVER+'getStreetsTopo').subscribe(\n       res=>{\n        this.streets = res;\n        this.createStreetsFeatures();\n       },err=>{\n\n       }\n     );\n   }\n\n   createStreetsFeatures(){\n    this.streetsCollection = new Collection;\n    this.streets.forEach(bikeStation =>{\n\n      //let splitCoords = bikeStation.pointsList.coordinates.split(' ');\n\n      let formatCoords= bikeStation.geom+\" 216.7\"+')';\n\n      let bikeStationCoords = this.format.readFeature(bikeStation.geom, { dataProjection: 'EPSG:4326', featureProjection: 'EPSG:3857' }).getGeometry().getCoordinates()\n\n        let streetFeature = new Feature({\n          geometry: new LineString(bikeStation.geom)\n        });\n\n        //streetFeature.setId(bikeStation.stationId);\n\n        // streetFeature.setProperties({ 'availableBikes':bikeStation.availableBikes, 'availableSlots': bikeStation.freeDocks, \n        // 'stationId':bikeStation.stationId, 'name':bikeStation.name, 'updatedAt':bikeStation.updatedAt, 'address':bikeStation.address });\n  \n        this.streetsStyleService.styleStreets(streetFeature);\n        \n        this.streetsCollection.push(streetFeature);\n    })\n\n    let streetsLayer = new VectorLayer({\n\t\t\tname: 'streets',\n\t\t\tsource: new VectorSource({\n\t\t\t\tfeatures: this.streetsCollection\n\t\t\t})\n    })\n\n\n  // for(let i = 0; i < this.mapService.map$.getLayers().getArray().length;i++){\n  //   if(this.mapService.map$.getLayers().getArray()[i].getProperties().name === 'bikeStations'){\n  //     this.mapService.map$.removeLayer(this.mapService.map$.getLayers().getArray()[i]);\n  //   }\n  // } \n    this.mapService.map$.addLayer(streetsLayer);\n\n     for(let i = 0; i < this.mapService.map$.getLayers().getArray().length;i++){\n    //  if(this.mapService.map$.getLayers().getArray()[i].getProperties().name === 'bikeStations'){\n    //    this.mapService.map$.removeLayer(this.mapService.map$.getLayers().getArray()[i]);\n    //  }\n    //console.log(this.mapService.map$.getLayers().getArray()[i].getProperties().name)\n   }\n    \n    \n  }\n\n  notifyStreets(streets){\n    this.streetsListOut.next(streets);\n  }\n}\n","import { Injectable } from '@angular/core';\n\nimport { Style, Icon as IconStyle, Text, Fill, Stroke, Circle as CircleStyle } from 'ol/style';\n\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class StyleLineFeaturesService {\n\n  constructor() { }\n\n  styleRoute(feature){\n    let lineStyle = [];\n\n    let streetsStyle = new Style({\n      stroke: new Stroke({ color: 'yellow', width: 5 }),\n    })\n    lineStyle.push(streetsStyle);\n    feature.setStyle(lineStyle);\n  }\n}\n","import { Injectable } from '@angular/core';\n\nimport { Style, Icon as IconStyle, Text, Fill, Stroke, Circle as CircleStyle } from 'ol/style';\nimport { MapService } from './map.service';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class StylePointsFeaturesService {\n\n  assets_base = 'assets/img/';\n\n  constructor(private mapService: MapService) { }\n\n  changeBikeMarkerStyle(bikeOrSlot){\n    \n    let markerStyle = [];\n\n   let less2Slots = new Style({\n      image: new IconStyle(({\n        anchor: [21, 70],\n        anchorXUnits: 'pixels',\n        anchorYUnits: 'pixels',\n        opacity: 1,\n        src: this.assets_base + 'less.png',\n        snapToPixel: false\n      })),\n      //Vehicle Label\n      text: new Text({\n        // text:\n        textAlign: 'center',\n        font: '11px Arial',\n        textBaseline: 'top',\n        fill: new Fill({ color: 'lightCyan' }),\n        stroke: new Stroke({ color: 'MediumBlue', width: 1 }),\n        offsetX: 0,\n        offsetY: 4,\n      })\n    })\n\n    let slotSymbol = new Style({\n      image: new IconStyle(({\n        anchor: [16, 70],\n        anchorXUnits: 'pixels',\n        anchorYUnits: 'pixels',\n        opacity: 1,\n        src: this.assets_base + 'iconmonstr-car-21-32.png',\n        snapToPixel: false\n      }))\n    })\n\n    let more2Slots = new Style({\n      image: new IconStyle(({\n        anchor: [21, 70],\n        anchorXUnits: 'pixels',\n        anchorYUnits: 'pixels',\n        opacity: 1,\n        src: this.assets_base + 'vehicle_color_1.png',\n        snapToPixel: false\n      })),\n      //Vehicle Label\n      text: new Text({\n        // text:\n        textAlign: 'center',\n        font: '11px Arial',\n        textBaseline: 'top',\n        fill: new Fill({ color: 'lightCyan' }),\n        stroke: new Stroke({ color: 'MediumBlue', width: 1 }),\n        offsetX: 0,\n        offsetY: 4,\n      })\n    })\n\n    let less2Bikes = new Style({\n      image: new IconStyle(({\n        anchor: [21, 70],\n        anchorXUnits: 'pixels',\n        anchorYUnits: 'pixels',\n        opacity: 1,\n        src: this.assets_base + 'less.png',\n        snapToPixel: false\n      })),\n      //Vehicle Label\n      text: new Text({\n        // text:\n        textAlign: 'center',\n        font: '11px Arial',\n        textBaseline: 'top',\n        fill: new Fill({ color: 'lightCyan' }),\n        stroke: new Stroke({ color: 'MediumBlue', width: 1 }),\n        offsetX: 0,\n        offsetY: 4,\n      })\n    })\n\n    let more2Bikes = new Style({\n      image: new IconStyle(({\n        anchor: [21, 70],\n        anchorXUnits: 'pixels',\n        anchorYUnits: 'pixels',\n        opacity: 1,\n        src: this.assets_base + 'vehicle_color_1.png',\n        snapToPixel: false\n      })),\n      //Vehicle Label\n      text: new Text({\n        // text:\n        textAlign: 'center',\n        font: '11px Arial',\n        textBaseline: 'top',\n        fill: new Fill({ color: 'lightCyan' }),\n        stroke: new Stroke({ color: 'MediumBlue', width: 1 }),\n        offsetX: 0,\n        offsetY: 4,\n      })\n    })\n\n      markerStyle.push(\n        new Style({\n        image: new IconStyle({\n          anchor: [0.5, 1],\n          anchorXUnits: 'fraction',\n          anchorYUnits: 'fraction',\n          opacity: 1,\n          src: this.assets_base + 'vehicle_pin.png',\n          snapToPixel: false\n        }),\n        //Text Style\n        text: new Text({\n          textAlign: 'center',\n          font: '9px',\n          textBaseline: 'top',\n          //text: vehicleInfo.name,\n          scale: 1.5,\n          offsetX: 0,\n          offsetY: 4,\n          // fill: new Fill({\n          //   color: textoVehiculo_color\n          // })\n          // ,\n          stroke: new Stroke({\n            width: 0\n          })\n        })\n      })\n      );\n\n    let layers = this.mapService.map$.getLayers();\n    let feature = layers.getArray()[1].getSource().getFeatures();\n    for(let i = 0; i < feature.length; i++){\n      if(bikeOrSlot === 'slot'){\n        \n        if(feature[i].values_.availableSlots <= 2){\n          markerStyle.push(less2Slots)\n          markerStyle.push(slotSymbol)\n        }else{\n          markerStyle.push(more2Slots)\n          markerStyle.push(slotSymbol)\n        }\n      }else{\n        if(feature[i].values_.availableBikes <= 2){\n          markerStyle.push(less2Bikes)\n        }else{\n          markerStyle.push(more2Bikes)\n        }\n      }\n      \n      feature[i].setStyle(markerStyle);\n    }\n  }\n\n  applyStyleToMarker(bikeStationFeature,bikeStation, bikeOrSlot?){\n\n    let markerStyle = [];\n      markerStyle.push(\n        new Style({\n        image: new IconStyle({\n          anchor: [0.5, 1],\n          anchorXUnits: 'fraction',\n          anchorYUnits: 'fraction',\n          opacity: 1,\n          src: this.assets_base + 'vehicle_pin.png',\n          snapToPixel: false\n        }),\n        //Text Style\n        text: new Text({\n          textAlign: 'center',\n          font: '9px',\n          textBaseline: 'top',\n          //text: vehicleInfo.name,\n          scale: 1.5,\n          offsetX: 0,\n          offsetY: 4,\n          // fill: new Fill({\n          //   color: textoVehiculo_color\n          // })\n          // ,\n          stroke: new Stroke({\n            width: 0\n          })\n        })\n      })\n      );\n\n\n      if(bikeOrSlot === undefined || bikeOrSlot === 'bikes'){\n        if(bikeStation.availableBikes > 5){\n          markerStyle.push(\n            new Style({\n              image: new IconStyle(({\n                anchor: [21, 70],\n                anchorXUnits: 'pixels',\n                anchorYUnits: 'pixels',\n                opacity: 1,\n                src: this.assets_base + 'vehicle_color_1.png',\n                snapToPixel: false\n              })),\n              //Vehicle Label\n              text: new Text({\n                // text:\n                textAlign: 'center',\n                font: '11px Arial',\n                textBaseline: 'top',\n                fill: new Fill({ color: 'lightCyan' }),\n                stroke: new Stroke({ color: 'MediumBlue', width: 1 }),\n                offsetX: 0,\n                offsetY: 4,\n              })\n            }),\n            new Style({\n              image: new IconStyle(({\n                anchor: [16, 70],\n                anchorXUnits: 'pixels',\n                anchorYUnits: 'pixels',\n                opacity: 1,\n                src: this.assets_base + 'iconmonstr-bicycle-1-32.png',\n                snapToPixel: false\n              }))\n            })\n          )\n        }else{\n          markerStyle.push(\n            new Style({\n              image: new IconStyle(({\n                anchor: [21, 70],\n                anchorXUnits: 'pixels',\n                anchorYUnits: 'pixels',\n                opacity: 1,\n                src: this.assets_base + 'vehicle_color_2.png',\n                snapToPixel: false\n              })),\n              //Vehicle Label\n              text: new Text({\n                // text:\n                textAlign: 'center',\n                font: '11px Arial',\n                textBaseline: 'top',\n                fill: new Fill({ color: 'lightCyan' }),\n                stroke: new Stroke({ color: 'MediumBlue', width: 1 }),\n                offsetX: 0,\n                offsetY: 4,\n              })\n            }),\n              new Style({\n                image: new IconStyle(({\n                  anchor: [16, 70],\n                  anchorXUnits: 'pixels',\n                  anchorYUnits: 'pixels',\n                  opacity: 1,\n                  src: this.assets_base + 'iconmonstr-bicycle-1-32.png',\n                  snapToPixel: false\n                }))\n              })\n            \n          )\n        }\n      }else{\n\n        let less2Slots = new Style({\n          image: new IconStyle(({\n            anchor: [21, 70],\n            anchorXUnits: 'pixels',\n            anchorYUnits: 'pixels',\n            opacity: 1,\n            src: this.assets_base + 'less.png',\n            snapToPixel: false\n          })),\n          //Vehicle Label\n          text: new Text({\n            // text:\n            textAlign: 'center',\n            font: '11px Arial',\n            textBaseline: 'top',\n            fill: new Fill({ color: 'lightCyan' }),\n            stroke: new Stroke({ color: 'MediumBlue', width: 1 }),\n            offsetX: 0,\n            offsetY: 4,\n          })\n        })\n    \n        let slotSymbol = new Style({\n          image: new IconStyle(({\n            anchor: [16, 65],\n            anchorXUnits: 'pixels',\n            anchorYUnits: 'pixels',\n            opacity: 1,\n            src: this.assets_base + 'iconmonstr-car-21-32.png',\n            snapToPixel: false\n          }))\n        })\n    \n        let more2Slots = new Style({\n          image: new IconStyle(({\n            anchor: [21, 70],\n            anchorXUnits: 'pixels',\n            anchorYUnits: 'pixels',\n            opacity: 1,\n            src: this.assets_base + 'vehicle_color_1.png',\n            snapToPixel: false\n          })),\n          //Vehicle Label\n          text: new Text({\n            // text:\n            textAlign: 'center',\n            font: '11px Arial',\n            textBaseline: 'top',\n            fill: new Fill({ color: 'lightCyan' }),\n            stroke: new Stroke({ color: 'MediumBlue', width: 1 }),\n            offsetX: 0,\n            offsetY: 4,\n          })\n        })\n        if(bikeStation.availableSlots <= 1){\n          markerStyle.push(less2Slots)\n          markerStyle.push(slotSymbol)\n        }else{\n          markerStyle.push(more2Slots)\n          markerStyle.push(slotSymbol)\n        }\n        \n\n        markerStyle.push()\n      }\n      \n      bikeStationFeature.setStyle(markerStyle);\n    }\n\n     applyStyleToFoundAdressMarker(foundAddressFeature){\n       let markerStyle = [];\n       markerStyle.push(\n         new Style({\n         image: new IconStyle({\n           anchor: [0.5, 1],\n           anchorXUnits: 'fraction',\n           anchorYUnits: 'fraction',\n           opacity: 1,\n           src: this.assets_base + 'vehicle_pin.png',\n           snapToPixel: false\n         }),\n         //Text Style\n         text: new Text({\n           textAlign: 'center',\n           font: '9px',\n           textBaseline: 'top',\n           //text: vehicleInfo.name,\n           scale: 1.5,\n           offsetX: 0,\n           offsetY: 4,\n    //       // fill: new Fill({\n    //       //   color: textoVehiculo_color\n    //       // })\n    //       // ,\n           stroke: new Stroke({\n             width: 0\n           })\n         })\n       })\n       );\n  \n         markerStyle.push(\n           new Style({\n             image: new IconStyle(({\n               anchor: [21, 70],\n               anchorXUnits: 'pixels',\n               anchorYUnits: 'pixels',\n               opacity: 1,\n               src: this.assets_base + 'vehicle_color_7.png',\n               snapToPixel: false\n             })),\n    //         //Vehicle Label\n             text: new Text({\n               // text:\n               textAlign: 'center',\n               font: '11px Arial',\n               textBaseline: 'top',\n               fill: new Fill({ color: 'lightCyan' }),\n               stroke: new Stroke({ color: 'MediumBlue', width: 1 }),\n               offsetX: 0,\n               offsetY: 4,\n             })\n           }),\n         )\n      \n       foundAddressFeature.setStyle(markerStyle);\n     }\n\n    applyStyleToUser(userPositionFeature){\n      let markerStyle = [];\n      markerStyle.push(\n        new Style({\n          image: new IconStyle({\n            anchor: [0.5, 1],\n            anchorXUnits: 'fraction',\n            anchorYUnits: 'fraction',\n            opacity: 1,\n            src: this.assets_base + 'vehicle_pin.png',\n            snapToPixel: false\n          }),\n          //Text Style\n          text: new Text({\n            textAlign: 'center',\n            font: '9px',\n            textBaseline: 'top',\n            //text: vehicleInfo.name,\n            scale: 1.5,\n            offsetX: 0,\n            offsetY: 4,\n            // fill: new Fill({\n            //   color: textoVehiculo_color\n            // })\n            // ,\n            stroke: new Stroke({\n              width: 0\n            })\n          })\n        }),\n        new Style({\n          image: new IconStyle(({\n            anchor: [16, 70],\n            anchorXUnits: 'pixels',\n            anchorYUnits: 'pixels',\n            opacity: 1,\n            src: 'assets/img/iconmonstr-user-6-32.png',\n            snapToPixel: false\n          }))\n        })\n      );\n\n      userPositionFeature.setStyle(markerStyle);\n    }\n\n    applyStyleToSelectedFeature(feature){\n      let markerStyleSelectedFeature = [];\n      markerStyleSelectedFeature.push(\n        new Style({\n          image: new IconStyle({\n            anchor: [0.5, 1],\n            anchorXUnits: 'fraction',\n            anchorYUnits: 'fraction',\n            opacity: 1,\n            src: this.assets_base + 'vehicle_pin.png',\n            snapToPixel: false\n          }),\n          //Text Style\n          text: new Text({\n            textAlign: 'center',\n            font: '9px',\n            textBaseline: 'top',\n            //text: vehicleInfo.name,\n            scale: 1.5,\n            offsetX: 0,\n            offsetY: 4,\n            // fill: new Fill({\n            //   color: textoVehiculo_color\n            // })\n            // ,\n            stroke: new Stroke({\n              width: 0\n            })\n          })\n        }),\n        new Style({\n          image: new IconStyle(({\n            anchor: [21, 70],\n            anchorXUnits: 'pixels',\n            anchorYUnits: 'pixels',\n            opacity: 1,\n            src: this.assets_base + 'vehicle_color_3.png',\n            snapToPixel: false\n          })),\n          //Vehicle Label\n          text: new Text({\n            // text:\n            textAlign: 'center',\n            font: '11px Arial',\n            textBaseline: 'top',\n            fill: new Fill({ color: 'lightCyan' }),\n            stroke: new Stroke({ color: 'MediumBlue', width: 1 }),\n            offsetX: 0,\n            offsetY: 4,\n          })\n        }),\n        new Style({\n          image: new IconStyle(({\n            anchor: [16, 70],\n            anchorXUnits: 'pixels',\n            anchorYUnits: 'pixels',\n            opacity: 1,\n            src: this.assets_base + 'iconmonstr-bicycle-1-32.png',\n            snapToPixel: false\n          }))\n        })\n      );\n\n      feature.setStyle(markerStyleSelectedFeature);\n    }\n}\n","import { Injectable } from '@angular/core';\n\nimport { Style, Icon as IconStyle, Text, Fill, Stroke, Circle as CircleStyle } from 'ol/style';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class StylePolygonFeaturesService {\n\n  constructor() { }\n\n  applyStyleToDistricts(feature){\n    let plots_styles = [];\n\n    let totalBikes = feature.getProperties().totalBikes;\n    let districtName = totalBikes.districtName;\n\n    let noBikes = new Style({\n      fill: new Fill({\n        color: [131, 145, 146, 0.5]\n      }),\n      stroke:new Stroke({ \n        color: 'black',\n        width: 1,\n        zIndex: 1\n      }),\n      text: new Text({\n           textAlign: 'center',\n           font: '9px',\n           textBaseline: 'top',\n            text: districtName,\n           scale: 1.5,\n           offsetX: 0,\n           offsetY: 4,\n            fill: new Fill({\n              color: 'black'\n            }),\n           \n           stroke: new Stroke({\n             width: 2\n           })\n         })\n    })\n\n    let lessThan50Bikes = new Style({\n      fill: new Fill({\n        color: [247, 220, 111, 0.5]\n      }),\n      stroke:new Stroke({ \n        color: 'black',\n        width: 1,\n        zIndex: 1\n      }),\n      text: new Text({\n           textAlign: 'center',\n           font: '9px',\n           textBaseline: 'top',\n           text: districtName,\n           scale: 1.5,\n           offsetX: 0,\n           offsetY: 4,\n            fill: new Fill({\n              color: 'black'\n            }),\n           \n           stroke: new Stroke({\n             width: 2,\n             color: 'black'\n           })\n         })\n    })\n\n    let moreThan50Bikes = new Style({\n      fill: new Fill({\n        color: [36, 113, 163, 0.5]\n      }),\n      stroke:new Stroke({ \n        color: 'black',\n        width: 1,\n        zIndex: 1\n      }),\n      text: new Text({\n           textAlign: 'center',\n           font: '9px',\n           textBaseline: 'top',\n           text: districtName,\n           scale: 1.5,\n           offsetX: 0,\n           offsetY: 4,\n            fill: new Fill({\n              color: 'black'\n            }),\n           \n           stroke: new Stroke({\n             width: 2\n           })\n         })\n    })\n\n     if(totalBikes.totalBikes <1){\n       plots_styles.push(\n\n         noBikes\n         );\n     }else if(totalBikes.totalBikes <50 && totalBikes.totalBikes > 0){\n       plots_styles.push(\n\n         lessThan50Bikes\n         );\n     }else{\n      \n       plots_styles.push(\n\n         moreThan50Bikes\n         );\n     }\n    \n   \n    feature.setStyle(plots_styles);\n  }\n}\n","import { Injectable } from '@angular/core';\n\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class StyleService {\n\n  assets_base = 'assets/img/';\n\n  constructor() { }\n\n  \n}\n","import { HttpClient, HttpErrorResponse } from '@angular/common/http';\r\nimport { Injectable } from '@angular/core';\r\nimport { MapService } from './map.service';\r\n\r\nimport Feature from 'ol/Feature';\r\nimport Point from 'ol/geom/Point';\r\nimport { Vector as VectorSource } from 'ol/source';\r\nimport VectorLayer from 'ol/layer/Vector';\r\nimport Collection from 'ol/Collection';\r\nimport { Style, Icon as IconStyle, Text, Fill, Stroke, Circle as CircleStyle } from 'ol/style';\r\nimport WKT from 'ol/format/WKT';\r\nimport { InfoCardService } from '../info-card/services/info-card.service';\r\n\r\nimport { Observable, throwError, BehaviorSubject } from 'rxjs';\r\nimport { stringify } from 'querystring';\r\nimport { TabledetailComponent } from '../components/tabledetail/tabledetail.component';\r\nimport { MatDialog } from '@angular/material/dialog';\r\nimport { NomadriddialogComponent } from '../components/nomadriddialog/nomadriddialog.component';\r\nimport { StyleService } from './style.service';\r\nimport { ErrordialogComponent } from '../components/errordialog/errordialog.component';\r\nimport { catchError, retry, shareReplay } from 'rxjs/operators';\r\nimport { StylePointsFeaturesService } from './style-points-features.service';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class UserService {\r\n\r\n  userCity: string;\r\n  userPosition;\r\n  format = new WKT();\r\n  assets_base = 'assets/img/';\r\n\r\n  private userPositionOut = new BehaviorSubject<any>(null);\r\n\r\n  userPosition$ = this.userPositionOut.asObservable();\r\n\r\n  //private REST_API_SERVER = \"http://localhost:8081/api/auth/EMTServices/\";\r\n  private REST_API_SERVER_URBAN = \"http://localhost:8081/api/urban/EMTServices/\";\r\n  private REST_API_SERVER = \"https://floating-reef-24535.herokuapp.com/api/auth/EMTServices/\";\r\n\r\n  constructor(private httpClient: HttpClient, private mapService: MapService,\r\n    private infoCardService: InfoCardService, public dialog: MatDialog, private stylePointsFeaturesService: StylePointsFeaturesService) {\r\n    this.getUserPosition();\r\n  }\r\n\r\n  // notifyUserPosition(userPosition) {\r\n  //   this.userPositionOut.next(userPosition)\r\n  // }\r\n\r\n  handleError(error: HttpErrorResponse) {\r\n    let dialog: MatDialog;\r\n    let errorMessage = 'Unknown error!';\r\n    if (error.error instanceof ErrorEvent) {\r\n      // Client-side errors\r\n      errorMessage = `Error: ${error.error.message}`;\r\n    } else {\r\n      // Server-side errors\r\n      errorMessage = `Error Code: ${error.status}\\nMessage: ${error.message}`;\r\n    }\r\n    window.alert(errorMessage);\r\n    return throwError(errorMessage);\r\n  }\r\n\r\n  // openDialog(){\r\n  //   const dialogRef = this.dialog.open(ErrordialogComponent, {\r\n  //     width: '600px',\r\n  //     data: { err: 'An error has ocurred getting your' }\r\n  //   });\r\n  // }\r\n\r\n  async getUserPosition() {\r\n    let coords = await this.fetchCoordinates();\r\n    //@ts-ignore\r\n    this.getGeoCoding(coords.coords);\r\n\r\n    let userCoords = {\r\n      //@ts-ignore\r\n      lat:coords.coords.latitude,\r\n      //@ts-ignore\r\n      lng:coords.coords.longitude\r\n    }\r\n    localStorage.setItem('userCoords',JSON.stringify(userCoords));\r\n\r\n  }\r\n\r\n  getCoordinates() {\r\n    return new Promise(function (resolve, reject) {\r\n      navigator.geolocation.getCurrentPosition(resolve, reject);\r\n    });\r\n  }\r\n\r\n  async fetchCoordinates() {\r\n    // notice, no then(), cause await would block and \r\n    // wait for the resolved result\r\n    const position = await this.getCoordinates();\r\n\r\n    // Actually return a value\r\n    return position;\r\n  }\r\n\r\n  getGeoCoding(coords) {\r\n    let userCity\r\n    this.getGeoCodingAPI(coords).subscribe(\r\n      res => {\r\n        //@ts-ignore\r\n        if (res.results[0].locations[0] != undefined) {\r\n          //@ts-ignore\r\n          localStorage.setItem('userLocationAddress', res.results[0].locations[0].street);\r\n          //@ts-ignore\r\n          userCity=res.results[0].locations[0].adminArea5;\r\n        }\r\n        this.registerVisit(userCity);\r\n        //@ts-ignore\r\n        this.checkIfUserInMadrid(userCity, res.results[0].providedLocation.latLng.lng, res.results[0].providedLocation.latLng.lat, res.results[0].providedLocation.latLng);\r\n      },err=>{\r\n        // let params = {\r\n        //   //@ts-ignore\r\n        //   'coordinates': 'POINT (' + coords.longitude + ' ' + coords.latitude + '),3857)'\r\n        // }\r\n        //  this.httpClient.post(this.REST_API_SERVER_URBAN+'checkIfUserInMadrid', params).subscribe(\r\n        //    res=>{\r\n        //      console.log(res)\r\n        //    },err=>{\r\n        //      console.log(err)\r\n        //    }\r\n        //  );\r\n        const dialogRef = this.dialog.open(NomadriddialogComponent, {\r\n          width: '600px',\r\n        });\r\n\r\n        dialogRef.componentInstance.apiError = true;\r\n  \r\n        dialogRef.afterClosed().subscribe(result => {\r\n          console.log(result)\r\n        });\r\n      }\r\n    )\r\n  }\r\n\r\n  getGeoCodingAPI(coords): Observable<any> {\r\n    let lat = coords.latitude;\r\n    let lng = coords.longitude;\r\n    return this.httpClient.get('https://www.mapquestapi.com/geocoding/v1/reverse?key=rap9nA00BZ9zIZLP1eWHyyyrRkqGdFVX&location='\r\n      + lat + ',' + lng).pipe(\r\n        retry(3),\r\n        //catchError(this.handleError)\r\n      );\r\n    shareReplay();\r\n  }\r\n\r\n  \r\n\r\n  registerVisit(userCity) {\r\n    this.httpClient.get(this.REST_API_SERVER + 'registerVisit', {\r\n      params: {\r\n        'userCity': userCity,\r\n      }\r\n    }\r\n    ).subscribe(\r\n      res => {\r\n      },\r\n      err => {\r\n        console.log(err)\r\n      }\r\n    )\r\n  }\r\n\r\n  checkIfUserInMadrid(userCity, lng, lat, latLng) {\r\n    if (userCity === 'Madrid') {\r\n      let formatCoords = 'POINT(' + lng + ' ' + lat + \" 216.7\" + ')';\r\n      let formatCoords2 = 'POINT(' + lng + ' ' + lat + ')';\r\n\r\n      this.mapService.updateMapViewCenter(formatCoords2);\r\n\r\n      let userPositionCoords = this.format.readFeature(formatCoords.replace(\r\n        /[\\W]*\\S+[\\W]*$/, '') + ')', { dataProjection: 'EPSG:4326', featureProjection: 'EPSG:3857' }).getGeometry().getCoordinates();\r\n\r\n      let userPositionFeature = new Feature({\r\n        geometry: new Point(userPositionCoords)\r\n      });\r\n\r\n      //@ts-ignore\r\n      this.mapService.sendUserPositionToInfoCard(latLng);\r\n\r\n      this.stylePointsFeaturesService.applyStyleToUser(userPositionFeature);\r\n\r\n      let userPositionCollection = new Collection;\r\n\r\n      userPositionCollection.push(userPositionFeature);\r\n\r\n      let userPositionLayer = new VectorLayer({\r\n        name: 'userPosition',\r\n        source: new VectorSource({\r\n          features: userPositionCollection\r\n        })\r\n      });\r\n\r\n      this.mapService.map$.addLayer(userPositionLayer);\r\n      //@ts-ignore\r\n    } else {\r\n      const dialogRef = this.dialog.open(NomadriddialogComponent, {\r\n        width: '600px',\r\n      });\r\n\r\n      dialogRef.afterClosed().subscribe(result => {\r\n        console.log(result)\r\n      });\r\n\r\n    }\r\n  }\r\n\r\n}\r\n","import { Injectable } from '@angular/core';\nimport { BehaviorSubject } from 'rxjs';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class UpperBarService {\n\n  private openLoginOut = new BehaviorSubject<string>(null);\n\n  uopenLogin$ = this.openLoginOut.asObservable();\n\n  constructor() { }\n\n  openLogin(openLogin: string){\n    this.openLoginOut.next(openLogin);\n  }\n}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { UpperBarComponent } from './upper-bar/upper-bar.component';\nimport { MaterialModule } from '../material-module';\nimport { AuthModuleModule } from '../auth-module/auth-module.module';\n\n\n\n@NgModule({\n  declarations: [UpperBarComponent],\n  imports: [\n    CommonModule,MaterialModule, AuthModuleModule\n  ],\n  exports:[\n    UpperBarComponent\n  ]\n})\nexport class UpperBarModule { }\n","<mat-toolbar>\n    <div *ngIf=\"userName === undefined\">\n        <div style=\"padding: 2%;\">\n            MadridMobility\n             <!-- <a role=\"button\" (click)=\"openLogin()\">login</a> -->\n        </div>\n        \n    </div>\n    <div *ngIf=\"userName !== undefined\">\n        <div style=\"padding: 2%;\">\n            MadridMobility\n             <p>Hola {{userName}}</p>\n        </div> \n    </div>\n    <div *ngIf=\"userName !== undefined\"><a role=\"button\" (click)=\"logOut()\">LogOut</a> </div>\n</mat-toolbar>\n","import { Component, OnInit } from '@angular/core';\nimport { AuthService } from 'src/app/auth-module/services/auth.service';\nimport { UpperBarService } from '../services/upper-bar.service';\n\n@Component({\n  selector: 'app-upper-bar',\n  templateUrl: './upper-bar.component.html',\n  styleUrls: ['./upper-bar.component.css']\n})\nexport class UpperBarComponent implements OnInit {\n\n  userName: string;\n\n  constructor(private upperBarService: UpperBarService, private authService: AuthService) { \n     this.authService.userToken$.subscribe(userToken => {\n       if(userToken != null){\n         let payload = JSON.parse(atob(userToken.split(\".\")[1]));\n         this.userName = payload.name;\n       }\n     })\n\n  }\n\n  ngOnInit(): void {\n  }\n\n  openLogin() {\n    this.upperBarService.openLogin('login');\n  }\n\n  logOut(){\n    this.userName = undefined;\n    localStorage.removeItem('JWT_TOKEN');\n    this.authService.logOut();\n  }\n\n}\n","// This file can be replaced during build by using the `fileReplacements` array.\r\n// `ng build --prod` replaces `environment.ts` with `environment.prod.ts`.\r\n// The list of file replacements can be found in `angular.json`.\r\n\r\nexport const environment = {\r\n  production: false\r\n};\r\n\r\n/*\r\n * For easier debugging in development mode, you can import the following file\r\n * to ignore zone related error stack frames such as `zone.run`, `zoneDelegate.invokeTask`.\r\n *\r\n * This import should be commented out in production mode because it will have a negative impact\r\n * on performance if an error is thrown.\r\n */\r\n// import 'zone.js/dist/zone-error';  // Included with Angular CLI.\r\n","import { enableProdMode } from '@angular/core';\r\nimport { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\r\n\r\nimport { AppModule } from './app/app.module';\r\nimport { environment } from './environments/environment';\r\n\r\nif (environment.production) {\r\n  enableProdMode();\r\n}\r\n\r\nplatformBrowserDynamic().bootstrapModule(AppModule)\r\n  .catch(err => console.error(err));\r\n"]}